import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as ListItemStories from './ListItem.stories';
import { ListItem } from './ListItem';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title="Components/ListItem" of={ListItemStories} />

# üìã ListItem

<CustomTabs>
  <Tab label="Overview">

## Introduction

ListItems are flexible interactive elements designed for lists, menus, settings, and option selections. They provide a structured way to display a title with optional description, leading content (usually a Spot), description tag, and flexible trailing content.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=2255-4155).

## Anatomy

<Canvas of={ListItemStories.Base} />

- **Title**: The main label of the item (required)
- **Leading Content (optional)**: Visually represents the item's category or action, usually using a Spot component
- **Description (optional)**: Provides additional context
- **Description Tag (optional)**: Small tag next to description for status or labels
- **Trailing Content (optional)**: Arbitrary content to be displayed on the right side

## Properties

### Overview

<Canvas of={ListItemStories.Base} />
<Controls of={ListItemStories.Base} />

### Trailing Content Variants

ListItems support arbitrary trailing content to suit different interaction patterns:

- **caret**: Navigation indicator (chevron right)
- **switch**: Switch for on/off states (requires `selected` prop)
- **value**: Displays a primary value with optional subvalue
- **tag**: Shows a tag for status or category
- **icon**: Custom trailing icon

<Canvas of={ListItemStories.TrailingContentVariantsShowcase} />

### States

ListItems support standard states including hover, active and disabled.

<Canvas of={ListItemStories.StateShowcase} />

## Responsive Layout

ListItems adapt to their container width, truncating long titles and descriptions as needed.

<Canvas of={ListItemStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - Automatically fits container width
> - Title truncates to one line
> - Description truncates to one line
> - Icons and trailing content maintain fixed sizes

## Accessibility

To be implemented:

- Color contrast for all elements and states
- Text zoom support
- Keyboard navigation and focus management
- Semantic ARIA attributes (e.g., role="menuitem")
- Proper labeling for screen readers

</Tab>
<Tab label="Implementation">

## Installation

Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-react @ledgerhq/ldls-design-core

# Install peer dependencies
npm install tailwindcss@^3.4.0 react@^18.3.1 clsx tailwind-merge class-variance-authority
```

### Tailwind Configuration

To use the ListItem component with our custom Tailwind preset, you need to configure your `tailwind.config.ts`:

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ledgerhq/ldls-design-core';

const config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx}", // Your project's files
    "./node_modules/@ledgerhq/ldls-ui-react/dist/lib/**/*.{js,ts,jsx,tsx}" // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

### Basic Usage

```tsx
import { ListItem } from '@ledgerhq/ldls-ui-react';
import { ChevronRight } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <ListItem
      title="Settings"
      trailingContent={<ChevronRight size={24} />}
    />
  );
}
```

### With Description

Add a description below the title for additional context:

```tsx
import { ListItem } from '@ledgerhq/ldls-ui-react';
import { ChevronRight } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <ListItem
      title="Account Settings"
      description="Manage your profile and preferences"
      trailingContent={<ChevronRight size={24} />}
    />
  );
}
```

### With Leading Content

Include a Spot component as leading icon for visual identification:

```tsx
import { ListItem, Spot } from '@ledgerhq/ldls-ui-react';
import { Settings, ChevronRight } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <ListItem
      title="Settings"
      description="Manage your profile and preferences"
      leadingContent={<Spot appearance="icon" icon={Settings} />}
      trailingContent={<ChevronRight size={24} />}
    />
  );
}
```

### Trailing Content

The ListItem supports arbitrary trailing content variants. Below are some examples:

```tsx
import { useState } from 'react';
import { ListItem, Switch, Tag } from '@ledgerhq/ldls-ui-react';
import { Settings, Check, Bolt, ChevronRight, User } from '@ledgerhq/ldls-ui-react/symbols';

function ListVariants() {
  const [selected, setSelected] = useState(false);

  return (
    <div className="flex flex-col gap-2 max-w-md">
      {/* Chevron - For navigation items */}
      <ListItem
        title="Chevron Variant"
        description="With description"
        leadingContent={<Spot appearance="icon" icon={User} />}
        trailingContent={<ChevronRight size={24} />}
      />

      {/* Switch - For switchable options */}
      <ListItem
        title="Enable Feature"
        description="Toggle this setting on/off"
        leadingContent={<Spot appearance="icon" icon={User} />}
        onClick={() => setSelected(!selected)}
        trailingContent={<Switch selected={selected} />}
      />

      {/* Value - For displaying values */}
      <ListItem
        title="Account Balance"
        description="Current available funds"
        leadingContent={<Spot appearance="icon" icon={User} />}
        trailingContent={
          <div className="text-right">
            <div className="body-2-semi-bold">42.00</div>
            <div className="text-muted body-3">USD</div>
          </div>
        }
      />

      {/* Tag - For status indicators */}
      <ListItem
        title="New Feature"
        description="Recently added functionality"
        leadingContent={<Spot appearance="icon" icon={User} />}
        trailingContent={<Tag label="New" appearance="accent" />}
      />

      {/* Icon - For trailing icons */}
      <ListItem
        title="Edit Profile"
        description="Modify your information"
        leadingContent={<Spot appearance="icon" icon={User} />}
        trailingContent={<Check />}
      />

      {/* None - No trailing content */}
      <ListItem
        title="Simple Item"
        description="No trailing elements"
        leadingContent={<Spot appearance="icon" icon={User} />}
      />
    </div>
  );
}
```

### With Description Tag

Add a tag to the description for additional status information:

```tsx
import { ListItem } from '@ledgerhq/ldls-ui-react';
import { Bolt } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <ListItem
      trailingContentVariant="caret"
      title="New Item"
      description="Recently added"
      descriptionTag={<Tag label="New" appearance="accent" icon={Bolt} />}
    />
  );
}
```

### Disabled State

Disable the ListItem to prevent interaction:

```tsx
<ListItem
  trailingContentVariant="toggle"
  title="Disabled Option"
  description="Cannot be changed"
  disabled
/>
```

### Responsive Layout

ListItem handles truncation responsively. Use container widths to control behavior:

```tsx
<div className="w-240 bg-base p-4">
  <ListItem
    trailingContentVariant="caret"
    title="Very Long Title That Will Truncate"
    description="Very long description that will also truncate appropriately"
    leadingContent={<Spot appearance="icon" icon={User} />}
  />
</div>
```

### Custom Styling

Use `className` for layout purposes only, such as maximum width:

```tsx
<ListItem
  trailingContentVariant="caret"
  title="Constrained Width"
  description="This item has a maximum width applied"
  className="max-w-md"
/>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the ListItem component and maintain design system principles.

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout constraints
<ListItem
  title="Item"
  className="max-w-md"
/>

// Use in lists with proper grouping
<div className="flex flex-col max-w-320">
  <ListItem title="Item 1" />
  <ListItem title="Item 2" />
</div>
```

‚ùå **Don't**

```tsx
// Don't override core styling
<ListItem
  title="Custom"
  className="bg-base text-active"
/>

// Don't modify internal spacing
<ListItem
  title="Wrong"
  className="gap-2 p-2"
/>

// Don't override typography
<ListItem
  title="Bad"
  className="heading-3"
/>

// Don't use for non-list contexts
<ListItem title="Standalone" className="m-4 border" />
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Import specific icons for tree-shaking
import { Check } from '@ledgerhq/ldls-ui-react/symbols';

// Use proper event handlers
<ListItem onClick={handleClick} />
```

‚ùå **Don't**

```tsx
// Don't import entire icon set
import * as AllIcons from '@ledgerhq/ldls-ui-react/symbols';

// Don't use complex inline handlers
<ListItem
  onClick={() => {
    // Complex logic...
  }}
/>
```

</Tab>
</CustomTabs>
