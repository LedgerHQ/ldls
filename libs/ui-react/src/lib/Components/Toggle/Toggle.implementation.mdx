import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Components/Toggle/Implementation" />

# Toggle Component Implementation

## Installation

First, ensure you are connected to the VPN, login to the npm registry and create a `.npmrc` file in your project root:

```bash
npm login --registry=https://jfrog.ledgerlabs.net/artifactory/api/npm/ldls-npm-prod-public/
```

```bash
# .npmrc
@ldls:registry=https://jfrog.ledgerlabs.net/artifactory/api/npm/ldls-npm-prod-public/
```

Then install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ldls/ui-react @ldls/design-core

# Install peer dependencies
npm install tailwindcss@^3.4.0 react@^18.3.1 clsx tailwind-merge class-variance-authority @radix-ui/react-toggle
```

#### About @radix-ui/react-toggle

The `@radix-ui/react-toggle` dependency is used internally by the Toggle component
to provide accessible, unstyled toggle functionality with proper keyboard navigation,
focus management, and screen reader support. It handles the core toggle behavior including
pressed/unpressed states and accessibility features, while our component adds the visual styling and design system tokens.

### Tailwind Configuration

To use the Toggle component with our custom Tailwind preset, you need to configure your `tailwind.config.ts`:

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ldls/design-core';

const config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx}", // Your project's files
    "./node_modules/@ldls/ui-react/dist/lib/**/*.{js,ts,jsx,tsx}" // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

## Basic Usage

```tsx
import { Toggle } from '@ldls/ui-react';

function MyComponent() {
  return <Toggle />;
}
```

## Controlled vs Uncontrolled

### Controlled Usage

Use the `selected` and `onChange` props for full control:

```tsx
import { useState } from 'react';
import { Toggle } from '@ldls/ui-react';

function MyComponent() {
  const [selected, setSelected] = useState(false);

  return (
    <Toggle
      selected={selected}
      onChange={(selected) => setSelected(selected)}
    />
  );
}
```

### Uncontrolled

Use `defaultSelected` for simple cases:

```tsx
<Toggle defaultSelected={true} />
```

## Accessibility Best Practices

### Labels and ARIA

```tsx
// ✅ Associated label
<div className="flex items-center space-x-8">
  <Toggle id="my-toggle" />
  <label htmlFor="my-toggle">Enabled</label>
</div>

// ✅ ARIA label for standalone toggle
<Toggle aria-label="Select all items" />

// ✅ ARIA described by for complex descriptions
<div>
  <Toggle
    id="marketing"
    aria-describedby="marketing-description"
  />
  <label htmlFor="marketing">Enable marketing emails</label>
  <p id="marketing-description" className="text-muted body-4">
    Receive promotional offers and product updates
  </p>
</div>
```

### Keyboard Navigation

The Toggle component automatically supports:

- **Tab**: Navigate to the Toggle
- **Space** or **Enter**: Toggle selected/unselected state

## Do's and Don'ts

The following guidelines ensure consistent usage of the Toggle component and maintain design system principles.

### Layout and Styling

✅ **Do**

````tsx
// Use className for responsive behavior
<Toggle className="hidden md:block" />

// Use className for margins and positioning
<Toggle className="mt-2 mr-4" />

❌ **Don't**

```tsx
// Don't override the core styling
<Toggle className="bg-base border-muted" />
// Don't modify the appearance
<Toggle className="w-32 h-20 rounded-lg" />
// Don't modify internal spacing or padding
<Toggle className="p-4" />
````

> **Note**: Use `className` only for layout-related utilities (positioning, margins, display properties). The toggle's core styling (colors, size, focus states, etc.) should be controlled through the design system to maintain consistency.

### State Management

✅ **Do**

```tsx
// Use controlled components for form state
const [isSelected, setIsSelected] = useState(false);
<Toggle selected={isSelected} onChange={setIsSelected} />
// Use defaultSelected for simple uncontrolled cases
<Toggle defaultSelected={false} />
```

❌ **Don't**

```tsx
// Don't mix controlled and uncontrolled patterns
<Toggle selected={isSelected} defaultSelected={true} />
// Don't ignore state change handlers
<Toggle selected={isSelected} />
// Don't use string values for selected state
<Toggle selected="true" />
```
