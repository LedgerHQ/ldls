import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SubheaderStories from './Subheader.stories';
import { Subheader } from './Subheader';
import { DoVsDontRow, DoBlockItem, DontBlockItem, CustomTabs, Tab } from '../../../../.storybook/components';
import CommonRulesDoAndDont from '../../../../.storybook/components/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Communication/Subheader' of={SubheaderStories} />

# üÉè Subheader

<CustomTabs>
  <Tab label="Overview">

## Introduction

Subheaders are section headers used to title content areas in the UI. They provide a clear heading with optional count, hint, description, and action elements using a flexible composite structure.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=5609-1117&m=dev).

## Anatomy

<Canvas of={SubheaderStories.Complete} />

The Subheader uses a composite structure with the following components:

- **Subheader** (container): The root component
- **SubheaderRow** (required): Layout component to align title, count, info, and action
- **SubheaderTitle** (required): The main heading text
- **SubheaderCount** (optional): Displays a number in parentheses, e.g., "(30)"
- **SubheaderInfo** (optional): Information icon that can be wrapped in tooltips
- **SubheaderDescription** (optional): Descriptive text below the title row
- **SubheaderAction** (optional): Action elements like links or buttons

## Properties

### Overview

<Canvas of={SubheaderStories.Base} />
<Controls of={SubheaderStories.Base} />

### With Description

Add descriptive text below the title row:

<Canvas of={SubheaderStories.WithDescription} />

### Complete Example

All features combined in one subheader:

<Canvas of={SubheaderStories.Complete} />

> **Note**: The `SubheaderRow` and `SubheaderTitle` are required. All other components (`SubheaderCount`, `SubheaderInfo`, `SubheaderDescription`, `SubheaderAction`) are optional and can be combined as needed.

### Interactive Row

Make the entire row clickable:

<Canvas of={SubheaderStories.Interactive} />

> **Key behaviors:**
>
> - Subheaders flow naturally to fill their parent container width
> - Title truncates with ellipsis when too long for the available space
> - Count, hint, and action elements maintain their positions
> - Uses flex layout for responsive arrangement
> - Action elements are positioned at the far right using `ml-auto`

## Accessibility

To be implemented:

- **Color contrast**: Ensure readable text
- **Text zoom**: Maintain layout integrity
- **Keyboard navigation**: Proper tab order for interactive elements
- **Semantic labeling**: Appropriate ARIA attributes for hint and action elements
- **Focus management**: Visible focus indicators on interactive elements

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/lumen-ui-react
```

> **Note**: `@ledgerhq/lumen-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide ‚Üí](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

## Basic Usage

```tsx
import { Subheader, SubheaderRow, SubheaderTitle } from '@ledgerhq/lumen-ui-react';

function MyComponent() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
      </SubheaderRow>
    </Subheader>
  );
}
```

The component uses a composite pattern where you build the subheader using multiple sub-components.

### With Count

Display a numeric count next to the title:

```tsx
import { Subheader, SubheaderRow, SubheaderTitle, SubheaderCount } from '@ledgerhq/lumen-ui-react';

function CountExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Accounts</SubheaderTitle>
        <SubheaderCount value={30} />
      </SubheaderRow>
    </Subheader>
  );
}
```

You can also provide a custom formatter:

```tsx
<SubheaderCount value={150} format={(n) => (n > 99 ? '(99+)' : `(${n})`)} />
```

### With Info Tooltip

Add an informational tooltip using the `SubheaderInfo` component (which includes an information icon by default):

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderInfo,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/lumen-ui-react';

function InfoExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
        <Tooltip>
          <TooltipTrigger asChild>
            <SubheaderInfo />
          </TooltipTrigger>
          <TooltipContent>
            This is additional information about the section
          </TooltipContent>
        </Tooltip>
      </SubheaderRow>
    </Subheader>
  );
}
```

### With Description

Add descriptive text below the title row:

```tsx
import { Subheader, SubheaderRow, SubheaderTitle, SubheaderDescription } from '@ledgerhq/lumen-ui-react';

function DescriptionExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
      </SubheaderRow>
      <SubheaderDescription>
        This is a detailed description that provides additional context about
        this section.
      </SubheaderDescription>
    </Subheader>
  );
}
```

### With Action

Include an action element in the row (automatically aligned to the right):

```tsx
import { Subheader, SubheaderRow, SubheaderTitle, SubheaderAction, Link } from '@ledgerhq/lumen-ui-react';

function ActionExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
        <SubheaderAction onClick={() => console.log('Action clicked')}>
          <Link href='https://ledger.com' appearance='accent' size='sm'>
            View More
          </Link>
        </SubheaderAction>
      </SubheaderRow>
    </Subheader>
  );
}
```

### Interactive Row

Make the entire row clickable by adding an `onClick` handler to `SubheaderRow`:

```tsx
import { Subheader, SubheaderRow, SubheaderTitle, SubheaderCount } from '@ledgerhq/lumen-ui-react';

function InteractiveExample() {
  return (
    <Subheader>
      <SubheaderRow onClick={() => console.log('Row clicked')}>
        <SubheaderTitle>Clickable Row</SubheaderTitle>
        <SubheaderCount value={12} />
      </SubheaderRow>
      <SubheaderDescription>
        The entire row is clickable when onClick is provided
      </SubheaderDescription>
    </Subheader>
  );
}
```

### Complete Example

Combine all components for a fully featured subheader:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderCount,
  SubheaderInfo,
  SubheaderDescription,
  SubheaderAction,
  Link,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/lumen-ui-react';

function FullExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
        <SubheaderCount value={42} />
        <Tooltip>
          <TooltipTrigger asChild>
            <SubheaderInfo />
          </TooltipTrigger>
          <TooltipContent>Additional info</TooltipContent>
        </Tooltip>
        <SubheaderAction onClick={() => console.log('Action clicked')}>
          <Link href='https://example.com' appearance='accent' size='sm'>
            Action
          </Link>
        </SubheaderAction>
      </SubheaderRow>
      <SubheaderDescription>
        This is a detailed description of the section.
      </SubheaderDescription>
    </Subheader>
  );
}
```

### Natural Width Behavior

Subheaders automatically adjust to their parent container's width. No additional props are needed:

```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Section Title</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

To control width, use container elements:

```tsx
{
  /* Full viewport width */
}
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Full Width</SubheaderTitle>
  </SubheaderRow>
</Subheader>;

{
  /* Constrained width */
}
<div className='max-w-4xl mx-auto'>
  <Subheader>
    <SubheaderRow>
      <SubheaderTitle>Constrained</SubheaderTitle>
    </SubheaderRow>
  </Subheader>
</div>;

{
  /* Responsive width */
}
<div className='w-full lg:max-w-2xl'>
  <Subheader>
    <SubheaderRow>
      <SubheaderTitle>Responsive</SubheaderTitle>
    </SubheaderRow>
  </Subheader>
</div>;
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<Subheader className='mb-4'>
  <SubheaderRow>
    <SubheaderTitle>Styled Subheader</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the Subheader component and maintain design system principles.

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use the composite structure'
      description='Always wrap Title in a Row component'
    >

```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use Title without Row"
      description='Row is required to properly layout the title and other elements'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderTitle>Title</SubheaderTitle>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Count for numeric values'
      description='Pass numbers using the value prop'
    >

```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Accounts</SubheaderTitle>
    <SubheaderCount value={30} />
  </SubheaderRow>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't add parentheses manually"
      description='Count component automatically formats the value'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Accounts (30)</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Description for additional context'
      description='Place Description outside Row for proper layout'
    >

```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
  </SubheaderRow>
  <SubheaderDescription>
    Additional context here
  </SubheaderDescription>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't put Description in Row"
      description='Description should be a direct child of Subheader'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
    <SubheaderDescription>
      Wrong placement
    </SubheaderDescription>
  </SubheaderRow>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Action in Row with onClick'
      description='Action should have an onClick handler and be placed in Row for right alignment'
    >

```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
    <SubheaderAction onClick={handleAction}>
      <Link href='#'>Link</Link>
    </SubheaderAction>
  </SubheaderRow>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use non-composite children"
      description='Only use the provided sub-components'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
  </SubheaderRow>
  <div>Random child</div>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>
</div>

<CommonRulesDoAndDont />

</Tab>
</CustomTabs>
