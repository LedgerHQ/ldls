import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SubheaderStories from './Subheader.stories';
import { Subheader } from './Subheader';
import { DoVsDontRow, DoBlockItem, DontBlockItem, CustomTabs, Tab } from '../../../../.storybook/components';
import CommonRulesDoAndDont from '../../../../.storybook/components/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Communication/Subheader' of={SubheaderStories} />

# üÉè Subheader

<CustomTabs>
  <Tab label="Overview">

## Introduction

Subheaders are section headers used to title content areas in the UI. They provide a clear heading with optional count, hint, description, and action elements using a flexible composite structure.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=5609-1117&m=dev).

## Anatomy

<Canvas of={SubheaderStories.WithFullFeatures} />

The Subheader uses a composite structure with the following components:

- **Subheader** (container): The root component
- **Subheader.Row** (required): Layout component to align title, count, hint, and action
- **Subheader.Title** (required): The main heading text
- **Subheader.Count** (optional): Displays a number in parentheses, e.g., "(30)"
- **Subheader.Hint** (optional): Information elements like tooltips
- **Subheader.Description** (optional): Descriptive text below the title row
- **Subheader.Action** (optional): Action elements like links or buttons

## Properties

### Overview

<Canvas of={SubheaderStories.Base} />
<Controls of={SubheaderStories.Base} />

### Content Variations

Subheaders support various content configurations using composite components:

- **Title only**: Basic heading with required Row and Title
- **With Count**: Includes a numeric count in parentheses
- **With Hint**: Includes information elements via `<Subheader.Hint>`
- **With Description**: Adds descriptive text below the title row
- **With Action**: Includes action elements via `<Subheader.Action>`
- **Complete**: All components combined

<Canvas of={SubheaderStories.ContentVariations} />

> **Note**: The `Subheader.Row` and `Subheader.Title` are required. All other components are optional and can be combined as needed.

### Responsive Layout

Subheaders adapt to their container constraints:

<Canvas of={SubheaderStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - Subheaders flow naturally to fill their parent container width
> - Title truncates with ellipsis when too long for the available space
> - Count, hint, and action elements maintain their positions
> - Uses flex layout for responsive arrangement

## Accessibility

To be implemented:

- **Color contrast**: Ensure readable text
- **Text zoom**: Maintain layout integrity
- **Keyboard navigation**: Proper tab order for interactive elements
- **Semantic labeling**: Appropriate ARIA attributes for hint and action elements
- **Focus management**: Visible focus indicators on interactive elements

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/lumen-ui-react
```

> **Note**: `@ledgerhq/lumen-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide ‚Üí](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

## Basic Usage

```tsx
import { Subheader } from '@ledgerhq/lumen-ui-react';

function MyComponent() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Section Title</Subheader.Title>
      </Subheader.Row>
    </Subheader>
  );
}
```

The component uses a composite pattern where you build the subheader using multiple sub-components.

### With Count

Display a numeric count next to the title:

```tsx
import { Subheader } from '@ledgerhq/lumen-ui-react';

function CountExample() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Accounts</Subheader.Title>
        <Subheader.Count>30</Subheader.Count>
      </Subheader.Row>
    </Subheader>
  );
}
```

### With Hint Tooltip

Add an informational tooltip using the `Subheader.Hint` component:

```tsx
import {
  Subheader,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/lumen-ui-react';
import { Information } from '@ledgerhq/lumen-ui-react/symbols';

function HintExample() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Section Title</Subheader.Title>
        <Subheader.Hint>
          <Tooltip>
            <TooltipTrigger asChild>
              <Information
                size={16}
                className='shrink-0 text-muted'
                aria-label='More information'
              />
            </TooltipTrigger>
            <TooltipContent>
              This is additional information about the section
            </TooltipContent>
          </Tooltip>
        </Subheader.Hint>
      </Subheader.Row>
    </Subheader>
  );
}
```

### With Description

Add descriptive text below the title row:

```tsx
import { Subheader } from '@ledgerhq/lumen-ui-react';

function DescriptionExample() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Section Title</Subheader.Title>
      </Subheader.Row>
      <Subheader.Description>
        This is a detailed description that provides additional context about
        this section.
      </Subheader.Description>
    </Subheader>
  );
}
```

### With Action in Row

Include an action element in the row (aligned to the right):

```tsx
import { Subheader, Link } from '@ledgerhq/lumen-ui-react';

function ActionInRowExample() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Section Title</Subheader.Title>
        <Subheader.Action>
          <Link
            href='https://ledger.com'
            appearance='accent'
            size='sm'
            isExternal
          >
            View More
          </Link>
        </Subheader.Action>
      </Subheader.Row>
    </Subheader>
  );
}
```

### With Action Outside Row

Place the action below the description for a different layout:

```tsx
import { Subheader, Link } from '@ledgerhq/lumen-ui-react';

function ActionOutsideRowExample() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Section Title</Subheader.Title>
      </Subheader.Row>
      <Subheader.Description>
        Description text that explains the section.
      </Subheader.Description>
      <Subheader.Action>
        <Link
          href='https://ledger.com'
          appearance='accent'
          size='sm'
          isExternal
        >
          View More
        </Link>
      </Subheader.Action>
    </Subheader>
  );
}
```

### Complete Example

Combine all components for a fully featured subheader:

```tsx
import {
  Subheader,
  Link,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/lumen-ui-react';
import { Information } from '@ledgerhq/lumen-ui-react/symbols';

function FullExample() {
  return (
    <Subheader>
      <Subheader.Row>
        <Subheader.Title>Section Title</Subheader.Title>
        <Subheader.Count>42</Subheader.Count>
        <Subheader.Hint>
          <Tooltip>
            <TooltipTrigger asChild>
              <Information
                size={16}
                className='shrink-0 text-muted'
                aria-label='More information'
              />
            </TooltipTrigger>
            <TooltipContent>Additional info</TooltipContent>
          </Tooltip>
        </Subheader.Hint>
        <Subheader.Action>
          <Link
            href='https://example.com'
            appearance='accent'
            size='sm'
            isExternal
          >
            Action
          </Link>
        </Subheader.Action>
      </Subheader.Row>
      <Subheader.Description>
        This is a detailed description of the section.
      </Subheader.Description>
    </Subheader>
  );
}
```

### Natural Width Behavior

Subheaders automatically adjust to their parent container's width. No additional props are needed:

```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Section Title</Subheader.Title>
  </Subheader.Row>
</Subheader>
```

To control width, use container elements:

```tsx
{
  /* Full viewport width */
}
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Full Width</Subheader.Title>
  </Subheader.Row>
</Subheader>;

{
  /* Constrained width */
}
<div className='max-w-4xl mx-auto'>
  <Subheader>
    <Subheader.Row>
      <Subheader.Title>Constrained</Subheader.Title>
    </Subheader.Row>
  </Subheader>
</div>;

{
  /* Responsive width */
}
<div className='w-full lg:max-w-2xl'>
  <Subheader>
    <Subheader.Row>
      <Subheader.Title>Responsive</Subheader.Title>
    </Subheader.Row>
  </Subheader>
</div>;
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<Subheader className='mb-4'>
  <Subheader.Row>
    <Subheader.Title>Styled Subheader</Subheader.Title>
  </Subheader.Row>
</Subheader>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the Subheader component and maintain design system principles.

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use the composite structure'
      description='Always wrap Title in a Row component'
    >

```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Title</Subheader.Title>
  </Subheader.Row>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use Title without Row"
      description='Row is required to properly layout the title and other elements'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <Subheader.Title>Title</Subheader.Title>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Count for numeric values'
      description='Pass numbers directly to Count component'
    >

```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Accounts</Subheader.Title>
    <Subheader.Count>30</Subheader.Count>
  </Subheader.Row>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't add parentheses manually"
      description='Count component automatically adds parentheses'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Accounts (30)</Subheader.Title>
  </Subheader.Row>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Description for additional context'
      description='Place Description outside Row for proper layout'
    >

```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Title</Subheader.Title>
  </Subheader.Row>
  <Subheader.Description>
    Additional context here
  </Subheader.Description>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't put Description in Row"
      description='Description should be a direct child of Subheader'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Title</Subheader.Title>
    <Subheader.Description>
      Wrong placement
    </Subheader.Description>
  </Subheader.Row>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Action in Row or at top level'
      description='Action can be placed in Row (right-aligned) or as a direct child'
    >

```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Title</Subheader.Title>
    <Subheader.Action>
      <Link href='#'>Link</Link>
    </Subheader.Action>
  </Subheader.Row>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use non-composite children"
      description='Only use the provided sub-components'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <Subheader.Row>
    <Subheader.Title>Title</Subheader.Title>
  </Subheader.Row>
  <div>Random child</div>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>
</div>

<CommonRulesDoAndDont />

</Tab>
</CustomTabs>
