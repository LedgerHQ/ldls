import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SubheaderStories from './Subheader.stories';
import { Subheader } from './Subheader';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title='Communication/Subheader' of={SubheaderStories} />

# üÉè Subheader

<CustomTabs>
  <Tab label="Overview">

## Introduction

Subheaders are section headers used to title content areas in the UI. They provide a clear heading with optional informational tooltip and action elements.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=5609-1117&m=dev).

## Anatomy

<Canvas of={SubheaderStories.WithFullFeatures} />

- **Title**: The main heading (required)
- **Subheader.Info (optional)**: Slot for information elements like tooltips
- **Subheader.Action (optional)**: Slot for action elements like links or buttons

## Properties

### Overview

<Canvas of={SubheaderStories.Base} />
<Controls of={SubheaderStories.Base} />

### Content Variations

Subheaders support various content configurations using slot composition:

- **Title only**: Basic heading
- **With Info Slot**: Includes information elements via `<Subheader.Info>`
- **With Action Slot**: Includes action elements via `<Subheader.Action>`
- **Complete**: All slots combined

<Canvas of={SubheaderStories.ContentVariations} />

> **Note**: The title is required. Info and Action slots are optional and can be combined as needed using React children composition.

### Responsive Layout

Subheaders adapt to their container constraints:

<Canvas of={SubheaderStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - Subheaders flow naturally to fill their parent container width
> - Title truncates with ellipsis when too long for the available space
> - Info and action slot elements maintain their positions
> - Uses flex layout for responsive arrangement

## Accessibility

To be implemented:

- **Color contrast**: Ensure readable text
- **Text zoom**: Maintain layout integrity
- **Keyboard navigation**: Proper tab order for interactive elements in slots
- **Semantic labeling**: Appropriate ARIA attributes for slot elements
- **Focus management**: Visible focus indicators on interactive slot elements

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/ldls-ui-react
```

> **Note**: `@ledgerhq/ldls-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide ‚Üí](?path=/docs/tailwind-setup-guide--docs) for complete installation and Tailwind configuration.

## Basic Usage

```tsx
import { Subheader } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return <Subheader title='Section Title' />;
}
```

The component uses a slot-based composition pattern where you can pass `Subheader.Info` and `Subheader.Action` as children.

### With Info Tooltip

Add an informational tooltip using the `Subheader.Info` slot:

```tsx
import {
  Subheader,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/ldls-ui-react';
import { Information } from '@ledgerhq/ldls-ui-react/symbols';

function TooltipExample() {
  return (
    <Subheader title='Section Title'>
      <Subheader.Info>
        <Tooltip>
          <TooltipTrigger asChild>
            <Information
              size={12}
              className='shrink-0 text-muted'
              aria-label='More information'
            />
          </TooltipTrigger>
          <TooltipContent>
            This is additional information about the section
          </TooltipContent>
        </Tooltip>
      </Subheader.Info>
    </Subheader>
  );
}
```

### With Action

Include an action element using the `Subheader.Action` slot:

```tsx
import { Subheader, Link } from '@ledgerhq/ldls-ui-react';

function ActionExample() {
  return (
    <Subheader title='Section Title'>
      <Subheader.Action>
        <Link
          href='https://ledger.com'
          appearance='accent'
          size='sm'
          isExternal
        >
          View More
        </Link>
      </Subheader.Action>
    </Subheader>
  );
}
```

### With Both Tooltip and Action

Combine both slots for a fully featured subheader:

```tsx
import {
  Subheader,
  Link,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/ldls-ui-react';
import { Information } from '@ledgerhq/ldls-ui-react/symbols';

function FullExample() {
  return (
    <Subheader title='Section Title'>
      <Subheader.Info>
        <Tooltip>
          <TooltipTrigger asChild>
            <Information
              size={12}
              className='shrink-0 text-muted'
              aria-label='More information'
            />
          </TooltipTrigger>
          <TooltipContent>Additional info</TooltipContent>
        </Tooltip>
      </Subheader.Info>
      <Subheader.Action>
        <Link
          href='https://example.com'
          appearance='accent'
          size='sm'
          isExternal
        >
          Action
        </Link>
      </Subheader.Action>
    </Subheader>
  );
}
```

### Natural Width Behavior

Subheaders automatically adjust to their parent container's width. No additional props are needed:

```tsx
<Subheader title='Section Title' />
```

To control width, use container elements:

```tsx
{
  /* Full viewport width */
}
<Subheader title='Full Width' />;

{
  /* Constrained width */
}
<div className='max-w-4xl mx-auto'>
  <Subheader title='Constrained' />
</div>;

{
  /* Responsive width */
}
<div className='w-full lg:max-w-2xl'>
  <Subheader title='Responsive' />
</div>;
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<Subheader
  title='Styled Subheader'
  className='mb-4' // Custom margin
/>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the Subheader component and maintain design system principles.

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout positioning
<Subheader
  title="Section Title"
  className="mb-6"
/>

// Use className for responsive behavior
<Subheader
  title="Desktop Section"
  className="hidden lg:flex"
/>

// Use container elements to control width
<div className="w-full">
  <Subheader title="Full Width" />
</div>
```

‚ùå **Don't**

```tsx
// Don't override core styling
<Subheader
  title="Custom Colors"
  className="bg-base text-active"
/>

// Don't modify internal spacing
<Subheader
  title="Wrong Spacing"
  className="gap-2 p-2"
/>

// Don't override typography classes
<Subheader
  title="Bad Typography"
  className="body-3"
/>
```

### Slot Usage

‚úÖ **Do**

```tsx
// Use proper slot composition
<Subheader title="With Action">
  <Subheader.Action>
    <Link href="#">Link</Link>
  </Subheader.Action>
</Subheader>

// Combine multiple slots
<Subheader title="Complete">
  <Subheader.Info>
    <Tooltip>...</Tooltip>
  </Subheader.Info>
  <Subheader.Action>
    <Link href="#">Action</Link>
  </Subheader.Action>
</Subheader>
```

‚ùå **Don't**

```tsx
// Don't put non-slot children
<Subheader title='Wrong'>
  <div>Random child</div> {/* Only use Subheader.Info and Subheader.Action */}
</Subheader>
```

</Tab>
</CustomTabs>
