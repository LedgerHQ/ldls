import { cn } from '@ledgerhq/lumen-utils-shared';
import type { Meta, StoryObj } from '@storybook/react-vite';
import React from 'react';
import { Link } from '../Link/Link';
import { Tooltip, TooltipTrigger, TooltipContent } from '../Tooltip/Tooltip';
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderCount,
  SubheaderInfo,
  SubheaderShowMore,
  SubheaderDescription,
  SubheaderAction,
} from './Subheader';

const Container = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn('w-400 bg-canvas p-8 text-base', className)} {...props} />
);

const meta: Meta<typeof Subheader> = {
  component: Subheader,
  title: 'Communication/Subheader',
  subcomponents: {
    SubheaderRow,
    SubheaderTitle,
    SubheaderDescription,
    SubheaderCount,
    SubheaderInfo,
    SubheaderShowMore,
    SubheaderAction,
  },
  parameters: {
    docs: {
      source: {
        language: 'tsx',
        format: true,
        type: 'code',
      },
    },
  },
};

export default meta;
type Story = StoryObj<typeof Subheader>;

export const Base: Story = {
  render: () => (
    <Container>
      <Subheader>
        <SubheaderRow>
          <SubheaderTitle>Section Title</SubheaderTitle>
        </SubheaderRow>
        <SubheaderDescription>
          This is a detailed description that provides additional context about
          this section.
        </SubheaderDescription>
      </Subheader>
    </Container>
  ),
  parameters: {
    docs: {
      source: {
        code: `
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Section Title</SubheaderTitle>
  </SubheaderRow>
  <SubheaderDescription>
    This is a detailed description that provides additional context about this section.
  </SubheaderDescription>
</Subheader>
        `,
      },
    },
  },
};

export const InteractiveRow: Story = {
  render: () => (
    <Container>
      <Subheader>
        <SubheaderRow onClick={() => console.log('Row clicked')}>
          <SubheaderTitle>Accounts</SubheaderTitle>
          <SubheaderCount value={5} />
          <SubheaderShowMore />
        </SubheaderRow>
        <SubheaderDescription>
          Interactive rows always include the chevron to indicate they lead to
          more content
        </SubheaderDescription>
      </Subheader>
    </Container>
  ),
  parameters: {
    docs: {
      source: {
        code: `
<Subheader>
  <SubheaderRow onClick={handleRowClick}>
    <SubheaderTitle>Accounts</SubheaderTitle>
    <SubheaderCount value={5} />
    <SubheaderShowMore />
  </SubheaderRow>
  <SubheaderDescription>
    Interactive rows always include the chevron to indicate they lead to more content
  </SubheaderDescription>
</Subheader>
        `,
      },
    },
  },
};

export const WithInfoIcon: Story = {
  render: () => (
    <Container>
      <Subheader>
        <SubheaderRow>
          <SubheaderTitle>Section with Info</SubheaderTitle>
          <Tooltip>
            <TooltipTrigger>
              <SubheaderInfo />
            </TooltipTrigger>
            <TooltipContent>
              Additional information about this section
            </TooltipContent>
          </Tooltip>
        </SubheaderRow>
        <SubheaderDescription>
          Use the info icon to provide contextual help or additional details
        </SubheaderDescription>
      </Subheader>
    </Container>
  ),
  parameters: {
    docs: {
      source: {
        code: `
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Section with Info</SubheaderTitle>
    <Tooltip>
      <TooltipTrigger>
        <SubheaderInfo />
      </TooltipTrigger>
      <TooltipContent>
        Additional information about this section
      </TooltipContent>
    </Tooltip>
  </SubheaderRow>
  <SubheaderDescription>
    Use the info icon to provide contextual help or additional details
  </SubheaderDescription>
</Subheader>
        `,
      },
    },
  },
};

export const WithAction: Story = {
  render: () => (
    <Container>
      <Subheader>
        <SubheaderRow>
          <SubheaderTitle>Recent Activity</SubheaderTitle>
          <SubheaderAction onClick={() => console.log('View all clicked')}>
            <Link appearance='accent' size='sm' underline={false}>
              View all
            </Link>
          </SubheaderAction>
        </SubheaderRow>
        <SubheaderDescription>
          Use actions for quick access to related functionality
        </SubheaderDescription>
      </Subheader>
    </Container>
  ),
  parameters: {
    docs: {
      source: {
        code: `
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Recent Activity</SubheaderTitle>
    <SubheaderAction onClick={handleViewAll}>
      <Link appearance="accent" size="sm" underline={false}>
        View all
      </Link>
    </SubheaderAction>
  </SubheaderRow>
  <SubheaderDescription>
    Use actions for quick access to related functionality
  </SubheaderDescription>
</Subheader>
        `,
      },
    },
  },
};
