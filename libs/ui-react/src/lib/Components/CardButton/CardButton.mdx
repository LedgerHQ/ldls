import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as CardButtonStories from './CardButton.stories';
import { CardButton } from './CardButton';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title="Components/CardButton" of={CardButtonStories} />

# üÉè CardButton

<CustomTabs>
  <Tab label="Overview">

## Introduction

CardButtons are interactive elements designed for presenting options, settings, or navigation items in a card-like format. They provide a structured way to display a title and optional description, icon, and navigation chevron, making them ideal for menus, settings panels, and option lists.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=89-525&m=dev).

## Anatomy

<Canvas of={CardButtonStories.FullFeatures} />

- **Icon (optional)**: visually communicates the card's purpose or category
- **Title**: the main label describing the action or option
- **Description (optional)**: provides additional context or explanation
- **Hide chevron (optional)**: hides the chevron right icon that is displayed by default on the right side

## Properties

### Overview

<Canvas of={CardButtonStories.Base} />
<Controls of={CardButtonStories.Base} />

### Appearance

There are two CardButton appearances, indicating different visual emphasis:

- **base** (default): solid background for primary options
- **outline**: dashed outline for secondary or alternative options

<Canvas of={CardButtonStories.AppearanceShowcase} />

### Content Variations

CardButtons support flexible content combinations to suit different use cases:

- **Title + Description**: provides additional explanation
- **Title + Icon + Description**: combines visual context with detailed explanation for enhanced clarity
- **Title + Description + Chevron**: provides detailed explanation with clear navigation indication
- **Complete card**: combines all elements for rich, informative options
- **Title + Icon**: adds visual context to the option
- **Title + Chevron**: indicates navigation or expansion

<Canvas of={CardButtonStories.ContentVariations} />

> **Note**: The title is required, while icon, description, and hideChevron are all optional and can be combined as needed.

### States

CardButtons support standard interactive states for both appearance variants:

<Canvas of={CardButtonStories.StatesShowcase} />

### Width Behavior

CardButtons naturally flow within their containers and adapt their width based on content:

<Canvas of={CardButtonStories.NaturalWidth} />

## Responsive Layout

CardButtons automatically adapt to their container constraints while maintaining proper content layout:

<Canvas of={CardButtonStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - CardButtons flow naturally to fit their parent container width
> - Container elements control the button width, not the component itself
> - Long titles and descriptions automatically wrap and truncate as needed
> - Icons (including the chevron) maintain fixed sizes for visual consistency

## Accessibility

To be implemented:

- **Color contrast**: ensure sufficient contrast for all appearance variants
- **Text zoom**: maintain usability when text is enlarged
- **Keyboard navigation**: full keyboard accessibility support
- **Semantic labeling**: proper ARIA attributes for screen readers
- **Focus management**: clear focus indicators and logical tab order

</Tab>
<Tab label="Implementation">

## Installation

Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-react @ledgerhq/ldls-design-core

# Install peer dependencies
npm install tailwindcss@^3.4.0 react@^18.3.1 clsx tailwind-merge class-variance-authority
```

### Tailwind Configuration

To use the CardButton component with our custom Tailwind preset, you need to configure your `tailwind.config.ts`:

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ledgerhq/ldls-design-core';

const config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx}", // Your project's files
    "./node_modules/@ledgerhq/ldls-ui-react/dist/lib/**/*.{js,ts,jsx,tsx}" // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

### Basic Usage

```tsx
import { CardButton } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return (
    <CardButton
      title="Payment Method"
      description="Add or edit your payment information"
      appearance="base"
    />
  );
}
```

### With Icon

The CardButton component supports icons that automatically scale to 24px size:

```tsx
import { CardButton } from '@ledgerhq/ldls-ui-react';
import { CreditCard } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <CardButton
      icon={CreditCard}
      title="Payment Method"
      description="Add or edit your payment information"
      appearance="base"
    />
  );
}
```

### Without Chevron

By default, a ChevronRight icon will be rendered on the right side. Use the `hideChevron` prop to hide it:

```tsx
<CardButton
  title="Settings"
  description="Configure your account preferences"
  hideChevron
  appearance="base"
/>
```

### Natural Width Behavior

CardButtons automatically flow to fit their parent container width. No additional props are needed:

```tsx
<CardButton
  title="Continue Setup"
  description="Complete your account configuration"
  appearance="base"
/>
```

To control card button width, use container elements:

```tsx
{/* Full container width */}
<CardButton title="Full Width" description="This button fills the container width" />

{/* Constrained width */}
<div className="max-w-md">
  <CardButton title="Constrained" description="This button is limited by its container" />
</div>

{/* Responsive width */}
<div className="w-full lg:max-w-lg">
  <CardButton title="Responsive" description="Width adapts based on screen size" />
</div>
```

### Outline Appearance

Use the outline appearance for a more subtle card style:

```tsx
<CardButton
  title="Optional Feature"
  description="Enable this feature for enhanced functionality"
  appearance="outline"
/>
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<CardButton
  title="Mobile Only"
  description="This option is only available on mobile"
  className="md:hidden" // Custom responsive display
  appearance="base"
/>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the CardButton component and maintain design system principles.

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout positioning
<CardButton
  title="Payment"
  description="Manage payment methods"
  className="mt-4 ml-2"
/>

// Use className for responsive behavior
<CardButton
  title="Desktop Feature"
  description="This feature is only available on desktop"
  className="hidden md:block"
/>

// Use container elements to control button width
<div className="w-full">
  <CardButton
    title="Continue"
    description="Proceed to the next step"
  />
</div>
```

‚ùå **Don't**

```tsx
// Don't override core button styling
<CardButton
  title="Custom"
  description="Wrong styling"
  className="bg-black text-white"
/>

// Don't modify internal spacing
<CardButton
  title="Wrong"
  description="Don't do this"
  className="gap-8 p-6"
/>

// Don't override typography classes
<CardButton
  title="Bad"
  description="Typography override"
  className="heading-2"
/>

// Don't modify border radius or outline styles
<CardButton
  title="Wrong"
  description="Don't override borders"
  className="rounded-full border-2"
  appearance="outline"
/>
```

### Icon Usage

‚úÖ **Do**

```tsx
// Import icons explicitly for better tree-shaking
import { Settings, CreditCard, Shield } from '@ledgerhq/ldls-ui-react/symbols';

// Use semantically appropriate icons
<CardButton
  icon={Settings}
  title="Settings"
  description="Configure your preferences"
/>

// Let CardButton handle icon sizing automatically
<CardButton
  icon={CreditCard}
  title="Payment"
  description="Manage payment methods"
/>
```

‚ùå **Don't**

```tsx
// Don't import entire icon library
import * as Icons from '@ledgerhq/ldls-ui-react/symbols';

// Don't try to customize icon size
<CardButton
  title="Wrong"
  description="Don't customize icon size"
  icon={() => <Settings size={20} />}
/>

// Don't use string-based icon references
<CardButton
  icon="settings" // Wrong - should be component reference
  title="Settings"
  description="Configure preferences"
/>
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Import specific icons for better tree-shaking
import { CreditCard } from '@ledgerhq/ldls-ui-react/symbols';

// Use proper event handlers
<CardButton
  title="Process Payment"
  description="Complete your transaction"
  onClick={handlePayment}
/>
```

‚ùå **Don't**

```tsx
// Don't import all icons
import * as AllIcons from '@ledgerhq/ldls-ui-react/symbols';

// Don't use inline functions for complex operations
<CardButton
  title="Complex Action"
  description="This will take some time"
  onClick={() => {
    // Complex inline logic here...
    performComplexOperation();
    updateMultipleStates();
    makeAPICall();
  }}
/>
```

</Tab>
</CustomTabs>
