import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SwitchStories from './Switch.stories';
import { Switch } from './Switch';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title='Components/Switch' of={SwitchStories} />

# üîò Switch

<CustomTabs>
  <Tab label="Overview">

## Introduction

Switches allow users to activate or deactivate an option instantly.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=802-186).

## Anatomy

<Canvas of={SwitchStories.Base} />

- **Track**: The background slider that changes color when toggled.
- **Thumb**: The circular indicator that moves when the state changes.

## Properties

### Overview

<Canvas of={SwitchStories.Base} />
<Controls of={SwitchStories.Base} />

### States

Includes selected, unselected and disabled states.

<Canvas of={SwitchStories.StatesShowcase} />

### Sizes

Includes small and large sizes.

<Canvas of={SwitchStories.SizesShowcase} />

## Accessibility

- Switches automatically include proper ARIA attributes via Radix UI
- Provide descriptive labels for screen readers
- Ensure sufficient color contrast in all states
- Support keyboard navigation (Space or Enter to toggle)

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/ldls-ui-react @radix-ui/react-switch
```

> **Note**: `@ledgerhq/ldls-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide ‚Üí](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

The `@radix-ui/react-switch` dependency provides accessible switch functionality with proper keyboard navigation, focus management, and screen reader support.

## Basic Usage

```tsx
import { Switch } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return <Switch />;
}
```

## Controlled vs Uncontrolled

### Controlled Usage

Use the `selected` and `onChange` props for full control:

```tsx
import { useState } from 'react';
import { Switch } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  const [selected, setSelected] = useState(false);

  return (
    <Switch
      selected={selected}
      onChange={(selected) => setSelected(selected)}
    />
  );
}
```

### Uncontrolled

Use `defaultSelected` for simple cases:

```tsx
<Switch defaultSelected={true} />
```

## Accessibility Best Practices

### Labels and ARIA

```tsx
// ‚úÖ Associated label
<div className="flex items-center space-x-8">
  <Switch id="my-switch" />
  <label htmlFor="my-switch">Enabled</label>
</div>

// ‚úÖ ARIA label for standalone switch
<Switch aria-label="Select all items" />

// ‚úÖ ARIA described by for complex descriptions
<div>
  <Switch
    id="marketing"
    aria-describedby="marketing-description"
  />
  <label htmlFor="marketing">Enable marketing emails</label>
  <p id="marketing-description" className="text-muted body-4">
    Receive promotional offers and product updates
  </p>
</div>
```

### Keyboard Navigation

The Switch component automatically supports:

- **Tab**: Navigate to the Switch
- **Space** or **Enter**: Switch selected/unselected state

## Do's and Don'ts

The following guidelines ensure consistent usage of the Switch component and maintain design system principles.

### Layout and Styling

‚úÖ **Do**

````tsx
// Use className for responsive behavior
<Switch className="hidden md:block" />

// Use className for margins and positioning
<Switch className="mt-2 mr-4" />

// Use the size prop
<Switch size="sm" />

‚ùå **Don't**

```tsx
// Don't override the core styling
<Switch className="bg-base border-muted" />
// Don't modify the appearance
<Switch className="w-32 h-20 rounded-lg" />
// Don't modify internal spacing or padding
<Switch className="p-4" />
````

> **Note**: Use `className` only for layout-related utilities (positioning, margins, display properties). The switch's core styling (colors, size, focus states, etc.) should be controlled through the design system to maintain consistency.

### State Management

‚úÖ **Do**

```tsx
// Use controlled components for form state
const [isSelected, setIsSelected] = useState(false);
<Switch selected={isSelected} onChange={setIsSelected} />
// Use defaultSelected for simple uncontrolled cases
<Switch defaultSelected={false} />
```

‚ùå **Don't**

```tsx
// Don't mix controlled and uncontrolled patterns
<Switch selected={isSelected} defaultSelected={true} />
// Don't ignore state change handlers
<Switch selected={isSelected} />
// Don't use string values for selected state
<Switch selected="true" />
```

</Tab>
</CustomTabs>
