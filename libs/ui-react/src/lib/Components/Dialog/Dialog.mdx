import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as DialogStories from './Dialog.stories';
import { Dialog, DialogContent, DialogTrigger, DialogHeader } from './Dialog';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';
import {
  DoVsDontRow,
  DoBlockItem,
  DontBlockItem,
} from '../../../../.storybook/DoVsDont';
import CommonRulesDoAndDont from '../../../../.storybook/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Components/Dialog' of={DialogStories} />

# ðŸªŸ Dialog

<CustomTabs>
  <Tab label="Overview">

## Introduction

Dialogs are modal windows that interrupt the normal workflow to grab the user's attention, typically for critical information, confirmation, or additional input.

> This Dialog component is built on top of [Radix UI Dialog](https://www.radix-ui.com/primitives/docs/components/dialog) primitives.

> View the component in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=6345-2641&m=dev).

## Anatomy

<Canvas of={DialogStories.Base} />

<Controls of={DialogStories.Base} />

- **Trigger**: The element that opens the dialog when interacted with
- **Overlay**: Dimmed background that covers the underlying content
- **Header**: Use `DialogHeader` component for a consistent dialog header with title, description, and controls
- **Content**: The main container for dialog content

> **Note**:
>
> The **width** of the dialog is `400px` by default, you can adjust the width of the dialog content by using the `className` prop on `DialogContent`.
>
> The **height** of the dialog is `auto-adjusted` to the content, you can adjust the height of the dialog content by using the `className` prop on `DialogContent`.

## Properties

### Header Configuration

Always use the `DialogHeader` component as the header for dialogs to maintain consistency. `DialogHeader` provides:

- Title and optional description
- Close button
- Optional back button
- Two appearance variants: `compact` and `extended`
- Automatic accessibility with proper ARIA roles

<Canvas of={DialogStories.AppearanceVariants} />

### With Back Button

Add navigation with `DialogHeader`'s `onBack` prop.

<Canvas of={DialogStories.WithBack} />

### With multiple steps

Use the `DialogHeader`'s `onBack` prop to navigate between steps.

<Canvas of={DialogStories.WithMultiSteps} />

### Content Area

The content area after the `DialogHeader` can contain any components. Ensure proper padding and scrolling if needed.

## Examples

### Info State Error

<Canvas of={DialogStories.InfoStateError} />

### Info State Success

<Canvas of={DialogStories.InfoStateSuccess} />

## Accessibility

To be implemented:

- Proper ARIA roles (dialog, etc.)
- Keyboard navigation (focus trapping, ESC to close)
- Screen reader support for content
- Focus management on open/close

<div className='rounded-8 mt-8 p-12 text-base'>
  <p className='mb-4 body-2-semi-bold'>Important Notes:</p>
  <ul className='space-y-2 body-2'>
    <li>
      Always include DialogHeader as the first child of DialogContent for
      consistent UX and accessibility
    </li>
    <li>Handle onClose in DialogHeader to properly close the dialog</li>
    <li>Use DialogPortal for correct positioning in the DOM</li>
    <li>
      Avoid using for non-critical information - prefer tooltips or other UI
      elements
    </li>
    <li>Ensure content is responsive and works on mobile devices</li>
    <li>
      Use className prop on DialogContent to adjust the width and height of the
      dialog
    </li>
  </ul>
</div>

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/lumen-ui-react @radix-ui/react-dialog
```

> **Note**: `@ledgerhq/lumen-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide â†’](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

The `@radix-ui/react-dialog` dependency provides accessible dialog behavior primitives with custom styling and composition.

## Basic Usage

```tsx
import {
  Dialog,
  DialogContent,
  DialogTrigger,
  DialogHeader,
} from '@ledgerhq/lumen-ui-react';
import { Button } from '@ledgerhq/lumen-ui-react'; // Example trigger

function MyComponent() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button>Open Dialog</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader
          appearance='compact'
          title='Dialog Title'
          onClose={() => {
            /* handle close */
          }}
        />
        <p>Dialog content here</p>
      </DialogContent>
    </Dialog>
  );
}
```

### With Description

```tsx
<Dialog>
  <DialogTrigger>Open</DialogTrigger>
  <DialogContent>
    <DialogHeader
      appearance='compact'
      title='Title'
      description='Additional details'
      onClose={() => {
        /* handle close */
      }}
    />
    Content
  </DialogContent>
</Dialog>
```

### Extended Appearance

Use extended `DialogHeader` for bigger dialogs:

```tsx
<Dialog>
  <DialogTrigger>Open Extended</DialogTrigger>
  <DialogContent className='w-[800px]'>
    <DialogHeader
      appearance='extended'
      title='Extended Dialog'
      onClose={() => {
        /* handle close */
      }}
    />
    Extended content
  </DialogContent>
</Dialog>
```

### With Back Button

```tsx
<Dialog>
  <DialogTrigger>Open</DialogTrigger>
  <DialogContent>
    <DialogHeader
      appearance='compact'
      title='Title'
      onBack={() => console.log('Back')}
      onClose={() => {
        /* handle close */
      }}
    />
    Content
  </DialogContent>
</Dialog>
```

### Custom Content Width

Control dialog width via className on DialogContent:

```tsx
<DialogContent className='w-[600px]'>{/* Content */}</DialogContent>
```

## Do's and Don'ts

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Always use DialogHeader'
      description='Use asChild for trigger composition'
    >

```tsx
<DialogContent>
  <DialogHeader title='Title' onClose={handleClose} />
  <div className='p-16'>Content</div>
</DialogContent>

<DialogTrigger asChild>
  <Button>Open</Button>
</DialogTrigger>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't omit DialogHeader"
      description='Avoid omitting DialogHeader or nesting dialogs'
    >

{/* prettier-ignore */}
```tsx
<DialogContent>
  <h2>Custom Title</h2>
</DialogContent>

<Dialog>
  <DialogContent>
    <Dialog>{/* Invalid */}</Dialog>
  </DialogContent>
</Dialog>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use className for width'
      description='Default width is 400px'
    >

{/* prettier-ignore */}
```tsx
<DialogContent className='max-w-512'>
  Content
</DialogContent>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't override core styles"
      description='Core styling and padding should not be modified'
    >

{/* prettier-ignore */}
```tsx
<DialogContent className='bg-base'>
  Custom bg
</DialogContent>

```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Keep content simple'
      description='Use state to control open/close behavior'
    >

```tsx
<DialogContent>
  <DialogHeader ... />
  <p>Simple text</p>
</DialogContent>

const [open, setOpen] = useState(false);
<Dialog open={open} onOpenChange={setOpen}>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't put heavy content"
      description='Avoid heavy content or forcing dialog to always stay open'
    >

{/* prettier-ignore */}
```tsx
<DialogContent>
  <ComplexChart />
</DialogContent>
```

    </DontBlockItem>

  </DoVsDontRow>
</div>

<CommonRulesDoAndDont />

</Tab>
</CustomTabs>
