import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as LinkStories from './Link.stories';
import { Link } from './Link';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';
import {
  DoVsDontRow,
  DoBlockItem,
  DontBlockItem,
} from '../../../../.storybook/DoVsDont';
import CommonRulesDoAndDont from '../../../../.storybook/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Components/Link' of={LinkStories} />

# ðŸ”— Link

<CustomTabs>
  <Tab label="Overview">

## Introduction

Links are essential navigation elements that direct users to internal pages or external resources. By default, links inherit their appearance and size from parent elements, making them highly flexible. They also support explicit base and accent color appearances, optional underline decoration, and predefined sizing options.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=770-11743&p=f).

## Anatomy

<Canvas of={LinkStories.ExternalLinkWithIcon} />

- **Label**: Describes the destination or action of the link
- **Icon (optional)**: Leading icon to enhance visual communication
- **External indicator (optional)**: Appears when the link opens in a new tab

## Properties

### Overview

<Canvas of={LinkStories.Base} />
<Controls of={LinkStories.Base} />

### Inherit Variants

By default, links inherit their appearance and size from their parent element. This is particularly useful when placing links within paragraphs, headings, or any text content where the link should seamlessly blend with the surrounding text:

<Canvas of={LinkStories.InheritVariants} />

### Appearance

There are three link appearance variants:

- **inherit** (default): Inherits text color from parent element
- **base**: Standard link with base text color and hover states
- **accent**: Interactive accent color for emphasis

<Canvas of={LinkStories.AppearanceShowcase} />

### Underline

The `underline` prop controls text decoration independently from appearance (default: `true`):

<Canvas of={LinkStories.UnderlineShowcase} />

### Size

Links come in three size options:

- **inherit** (default): Inherits typography from parent element
- **sm**: Small size with **body-2** typography
- **md**: Medium size with **body-1** typography

<Canvas of={LinkStories.SizesShowcase} />

## Responsive Layout

Links adapt to their container, truncating long text to prevent overflow:

<Canvas of={LinkStories.ResponsiveLayout} />

## Accessibility

To be implemented:

- Color contrast
- Text zoom
- Keyboard navigation
- Semantic labeling

### As Child

<Canvas of={LinkStories.AsChild} />

<div className='rounded-8 mt-8 bg-muted p-12 text-base'>
  <p className='mb-4 body-2-semi-bold'>Important Notes:</p>
  <ul className='space-y-2 body-2'>
    <li>When using asChild, the child element receives all link styles</li>
    <li>
      Icon and isExternal props are ignored with asChild - handle these in the
      child element if needed
    </li>
    <li>Perfect for router links that should look like links</li>
  </ul>
</div>

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/lumen-ui-react @radix-ui/react-slot
```

> **Note**: `@ledgerhq/lumen-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide â†’](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

The `@radix-ui/react-slot` dependency enables flexible composition patterns, allowing the Link to merge its props with child elements when needed.

## Basic Usage

```tsx
import { Link } from '@ledgerhq/lumen-ui-react';

function MyComponent() {
  return <Link href='/page'>Go to Page</Link>;
}
```

By default, the link will inherit its appearance and size from the parent element. You can override this by specifying explicit values:

```tsx
<Link appearance='base' size='md' href='/page'>
  Link with explicit base appearance and medium size
</Link>
```

### With or Without Underline

Links are underlined by default. Use `underline={false}` to remove the underline:

```tsx
// Default: with underline
<Link href='/page'>
  Underlined Link (default)
</Link>

// Explicitly without underline
<Link underline={false} href='/page'>
  Link without underline
</Link>
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<Link
  href='/page'
  className='md:hidden' // Custom responsive behavior
>
  Link for small screen
</Link>
```

### With Icons

The Link component supports icons with automatic size adjustment based on the link size:

```tsx
import { Link } from '@ledgerhq/lumen-ui-react';
import { ArrowRight } from '@ledgerhq/lumen-ui-react/symbols';

function MyComponent() {
  return (
    <Link appearance='accent' size='sm' href='/next' icon={ArrowRight}>
      Continue
    </Link>
  );
}
```

### External Links

Use the `isExternal` prop to automatically add target="\_blank" and an external link icon:

```tsx
<Link href='https://example.com' isExternal>
  Visit External Site
</Link>
```

### Inherit Styles from Parent

By default, links inherit their appearance and size from the parent element. This is the recommended approach when placing links within existing text or headings:

```tsx
// Terms and conditions in body text
<div className='text-base body-2'>
  By continuing, you agree to our{' '}
  <Link href='/terms'>Terms & Conditions</Link>
  {' '}and{' '}
  <Link href='/privacy'>Privacy Policy</Link>.
</div>

// Link in a heading
<div className='text-interactive heading-3'>
  Need help? <Link href='/support'>Contact Support</Link>
</div>

// Link without underline
<div className='text-base body-1-semi-bold'>
  Already have an account?{' '}
  <Link underline={false} href='/signin'>Sign in</Link>
</div>
```

### Using with Routers (asChild)

The `asChild` prop allows integration with routing libraries by merging Link styles with child elements:

```tsx
import { Link } from '@ledgerhq/lumen-ui-react';
import { Link as RouterLink } from 'react-router-dom';

function MyComponent() {
  return (
    <Link asChild>
      <RouterLink to='/dashboard'>Dashboard</RouterLink>
    </Link>
  );
}
```

You can specify explicit appearance and size if needed:

```tsx
<Link asChild appearance='base' size='md'>
  <RouterLink to='/dashboard'>Dashboard</RouterLink>
</Link>
```

Note: When using asChild, the child element handles its own content. Props like 'icon' and 'isExternal' are ignored - implement equivalent functionality in the child if needed.

## Do's and Don'ts

These guidelines ensure consistency, maintainability, and proper implementation of our design system principles.

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use children for content'
      description='Pass icon as a component reference for proper sizing'
    >

```tsx
<Link>
  See <em>Terms and Conditions</em>
</Link>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use text prop or string icons"
      description='Avoid text prop, string-based icons, or including icons in children'
    >

{/* prettier-ignore */}
```tsx
<Link text='Accept Terms and Conditions' />
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use underline prop'
      description='Control underline decoration using the underline prop'
    >

```tsx
<Link href='/page' underline={false}>
  No Underline
</Link>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use className for underline"
      description='Avoid using className to control underline decoration'
    >

{/* prettier-ignore */}
```tsx
<Link href='/page' className='no-underline'>
  No Underline
</Link>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use appearance prop for color'
      description='Control link color using the appearance prop'
    >

```tsx
<Link href='/page' appearance='accent'>
  Accent Link
</Link>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use className for color"
      description='Avoid using className to override link colors'
    >

{/* prettier-ignore */}
```tsx
<Link href='/page' className='text-accent'>
  Accent Link
</Link>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use size prop for typography'
      description='Control link size and typography using the size prop'
    >

```tsx
<Link href='/page' size='sm'>
  Small Link
</Link>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use className for typography"
      description='Avoid using className to override link typography'
    >

{/* prettier-ignore */}
```tsx
<Link href='/page' className='body-2'>
  Small Link
</Link>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Keep underline for base appearance'
      description='Base links should remain underlined for accessibility'
    >

{/* prettier-ignore */}
```tsx
<Link appearance='base' href='/page'>
  Go to Ledger store
</Link>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't remove underline from base appearance"
      description='Makes it hard to distinguish from regular bold text, hurting accessibility'
    >

{/* prettier-ignore */}
```tsx
<Link appearance='base' underline={false} href='/page'>
  Go to Ledger store
</Link>
```

    </DontBlockItem>

  </DoVsDontRow>

  <CommonRulesDoAndDont />
</div>

</Tab>
</CustomTabs>
