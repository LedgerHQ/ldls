import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as LinkStories from './Link.stories';
import { Link } from './Link';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title='Components/Link' of={LinkStories} />

# üîó Link

<CustomTabs>
  <Tab label="Overview">

## Introduction

Links are essential navigation elements that direct users to internal pages or external resources. They support underlined and accent appearances for different emphases and contexts.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=770-11743&p=f).

## Anatomy

<Canvas of={LinkStories.ExternalLinkWithIcon} />

- **Label**: Describes the destination or action of the link
- **Icon (optional)**: Leading icon to enhance visual communication
- **External indicator (optional)**: Appears when the link opens in a new tab

## Properties

### Overview

<Canvas of={LinkStories.Base} />
<Controls of={LinkStories.Base} />

### Appearance

There are two link appearances, indicating emphasis:

- underlined (default)
- accent

<Canvas of={LinkStories.AppearanceShowcase} />

### Size

Links come in two sizes:

- sm (**body-2** typography)
- md (default, **body-1** typography)

<Canvas of={LinkStories.SizesShowcase} />

## Responsive Layout

Links adapt to their container, truncating long text to prevent overflow:

<Canvas of={LinkStories.ResponsiveLayout} />

## Accessibility

To be implemented:

- Color contrast
- Text zoom
- Keyboard navigation
- Semantic labeling

### As Child

<Canvas of={LinkStories.AsChild} />

<div className='rounded-8 mt-8 bg-muted p-12'>
  <p className='mb-4 body-2-semi-bold'>Important Notes:</p>
  <ul className='space-y-2 body-2'>
    <li>When using asChild, the child element receives all link styles</li>
    <li>
      Icon and isExternal props are ignored with asChild - handle these in the
      child element if needed
    </li>
    <li>Perfect for router links that should look like links</li>
  </ul>
</div>

</Tab>
<Tab label="Implementation">

```bash
npm install @ledgerhq/ldls-ui-react @radix-ui/react-slot
```

> **Note**: `@ledgerhq/ldls-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide ‚Üí](?path=/docs/tailwind-setup-guide--docs) for complete installation and Tailwind configuration.

The `@radix-ui/react-slot` dependency enables flexible composition patterns, allowing the Link to merge its props with child elements when needed.

## Basic Usage

```tsx
import { Link } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return (
    <Link appearance='underlined' size='md' href='/page'>
      Go to Page
    </Link>
  );
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<Link
  appearance='underlined'
  size='md'
  href='/page'
  className='md:hidden' // Custom responsive behavior
>
  Link for small screen
</Link>
```

### With Icons

The Link component supports icons with automatic size adjustment based on the link size:

```tsx
import { Link } from '@ledgerhq/ldls-ui-react';
import { ArrowRight } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <Link appearance='accent' size='sm' href='/next' icon={ArrowRight}>
      Continue
    </Link>
  );
}
```

### External Links

Use the `isExternal` prop to automatically add target="\_blank" and an external link icon:

```tsx
<Link appearance='underlined' size='md' href='https://example.com' isExternal>
  Visit External Site
</Link>
```

### Using with Routers (asChild)

The `asChild` prop allows integration with routing libraries by merging Link styles with child elements:

```tsx
import { Link } from '@ledgerhq/ldls-ui-react';
import { Link as RouterLink } from 'react-router-dom';

function MyComponent() {
  return (
    <Link asChild appearance='underlined' size='md'>
      <RouterLink to='/dashboard'>Dashboard</RouterLink>
    </Link>
  );
}
```

Note: When using asChild, the child element handles its own content. Props like 'icon' and 'isExternal' are ignored - implement equivalent functionality in the child if needed.

## Do's and Don'ts

These guidelines ensure consistency, maintainability, and proper implementation of our design system principles.

### Content Composition

‚úÖ **Do**

```tsx
// Use children for content composition
<Link>
  See <em>Terms and Conditions</em>
</Link>;

// Pass icon as a component reference
import { ArrowRight } from '@ledgerhq/ldls-ui-react/symbols';
<Link icon={ArrowRight}>Next</Link>;
```

‚ùå **Don't**

```tsx
// Don't use text prop
<Link text="Accept Terms and Conditions" />

// Don't pass icon as a string
<Link icon="ArrowRight">Next</Link>

// Don't include icon in children
<Link>
  <ArrowRight /> Next
</Link>
```

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout positioning
<Link className="mt-4 ml-2">Dashboard</Link>

// Use className for positioning
<Link className="absolute top-0 right-0" isExternal>Go to shop</Link>

// Use className for margins and spacing in layout
<Link className="mx-auto my-4">Centered</Link>

// Use className for different positions between mobile and desktop
<Link className="hidden md:block">Desktop Only</Link>
<Link className="md:hidden">Mobile Only</Link>
```

‚ùå **Don't**

```tsx
// Don't override link's core styling
<Link className="text-base no-underline rounded-full">Custom</Link>

// Don't modify internal spacing/gap
<Link className="gap-4">Wrong Spacing</Link>

// Don't override typography - use size prop instead
<Link className="heading-2">Wrong Typography</Link>

// Don't modify hover/focus states
<Link className="hover:text-interactive-hover">Custom Hover</Link>
```

> **Note**: Use `className` only for layout-related utilities (positioning, margins, display properties). The link's core styling (colors, underline, gap, hover states, etc.) and typography should be controlled through the component's props (`appearance`, `size`) to maintain design system consistency.

### Icon Usage

‚úÖ **Do**

```tsx
// Import icons explicitly
import { ArrowRight } from '@ledgerhq/ldls-ui-react/symbols';

// Use icon prop for consistent sizing
<Link icon={ArrowRight} appearance="accent" />

// Let Link handle icon sizing
<Link icon={ArrowRight} size="sm">Small</Link>
```

‚ùå **Don't**

```tsx
// Don't import entire icon library
import * as Icons from '@ledgerhq/ldls-ui-react/symbols';

// Don't modify icon size directly
<Link>
  <ArrowRight size={24} />
  Next
</Link>

// Don't use string-based icon names
<Link icon="arrow-right">Next</Link>
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Import specific icons for better tree-shaking
import { ArrowRight } from '@ledgerhq/ldls-ui-react/symbols';
```

‚ùå **Don't**

```tsx
// Don't import all icons
import * as AllIcons from '@ledgerhq/ldls-ui-react/symbols';
```

</Tab>
</CustomTabs>
