import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Components/Banner/Implementation" />

# Banner Component Implementation

## Installation

First, ensure you are connected to the VPN, login to the npm registry and create a `.npmrc` file in your project root:

```bash
npm login --registry=https://jfrog.ledgerlabs.net/artifactory/api/npm/ldls-npm-prod-public/
```

```bash
# .npmrc
@ldls:registry=https://jfrog.ledgerlabs.net/artifactory/api/npm/ldls-npm-prod-public/
```

Then install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-react @ledgerhq/ldls-design-core

# Install peer dependencies
npm install tailwindcss@^3.4.0 react@^18.3.1 clsx tailwind-merge class-variance-authority @radix-ui/react-slot
```

#### About @radix-ui/react-slot

The `@radix-ui/react-slot` dependency is used internally by the Button component
to enable flexible composition patterns. It allows the Button to merge its props with child
elements when needed.

### Tailwind Configuration

To use the Banner component with our custom Tailwind preset, you need to configure your `tailwind.config.ts`:

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ledgerhq/ldls-design-core';

const config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx}", // Your project's files
    "./node_modules/@ledgerhq/ldls-ui-react/dist/lib/**/*.{js,ts,jsx,tsx}" // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

### Basic Usage

```tsx
import { Banner } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return (
    <Banner
      title="Information"
      description="This is an informational message for the user"
      appearance="info"
    />
  );
}
```

### Banner Appearances

The Banner component supports four different appearances, each with its own semantic meaning and visual styling:

```tsx
import { Banner } from '@ledgerhq/ldls-ui-react';

function NotificationSystem() {
  return (
    <div className="space-y-4">
      {/* Info - Default informational messages */}
      <Banner
        appearance="info"
        title="Information"
        description="General information or tips"
      />

      {/* Success - Positive feedback or completion */}
      <Banner
        appearance="success"
        title="Success"
        description="Action completed successfully"
      />

      {/* Warning - Caution or important notices */}
      <Banner
        appearance="warning"
        title="Warning"
        description="Please review this important information"
      />

      {/* Error - Error states or critical issues */}
      <Banner
        appearance="error"
        title="Error"
        description="Something went wrong, please try again"
      />
    </div>
  );
}
```

### With Action Buttons

Banners can include primary and secondary action buttons to allow user interaction:

```tsx
import { Banner } from '@ledgerhq/ldls-ui-react';

function ActionableBanner() {
  const handleAccept = () => {
    console.log('User accepted');
  };

  const handleDecline = () => {
    console.log('User declined');
  };

  return (
    <Banner
      appearance="warning"
      title="Terms of Service Updated"
      description="Please review and accept the updated terms of service to continue using our platform"
      primaryAction={{ label: "Accept", onClick: handleAccept }}
      secondaryAction={{ label: "Review Later", onClick: handleDecline }}
    />
  );
}
```

### Dismissible Banner

Add a close button to make banners dismissible by the user:

```tsx
import { Banner } from '@ledgerhq/ldls-ui-react';
import { useState } from 'react';

function DismissibleBanner() {
  const [isVisible, setIsVisible] = useState(true);

  if (!isVisible) return null;

  return (
    <Banner
      appearance="info"
      title="Welcome!"
      description="Thanks for joining our platform. Here are some tips to get started."
      closeAction={{
        onClick: () => setIsVisible(false),
        ariaLabel: 'Close welcome banner'
      }}
    />
  );
}
```

### Full Width Banner

Use the `isFull` prop to make the banner take the full width of its container:

```tsx
<Banner
  title="System Maintenance"
  description="Scheduled maintenance will occur tonight from 2:00 AM to 4:00 AM EST"
  appearance="warning"
  isFull
  closeAction={{ onClick: () => handleDismiss(), ariaLabel: 'Dismiss' }}
/>
```

### Complete Example

Here's a comprehensive example showing all Banner features:

```tsx
import { Banner } from '@ledgerhq/ldls-ui-react';
import { useState } from 'react';

function NotificationCenter() {
  const [notifications, setNotifications] = useState([
    {
      id: '1',
      type: 'success',
      title: 'Payment Processed',
      description: 'Your payment of $299.99 has been successfully processed.',
      dismissible: true,
    },
    {
      id: '2',
      type: 'warning',
      title: 'Verification Required',
      description: 'Please verify your email address to continue using all features.',
      dismissible: true,
      actions: true,
    },
  ]);

  const dismissNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id));
  };

  const handleVerify = () => {
    console.log('Redirecting to verification...');
  };

  const handleLater = () => {
    console.log('Remind me later');
  };

  return (
    <div className="space-y-4">
      {notifications.map(notification => (
        <Banner
          key={notification.id}
          appearance={notification.type as any}
          title={notification.title}
          description={notification.description}
          isFull
          closeAction={notification.dismissible ? {
            onClick: () => dismissNotification(notification.id),
            ariaLabel: 'Close notification'
          } : undefined}
          primaryAction={notification.actions ? { label: "Verify Now", onClick: handleVerify } : undefined}
          secondaryAction={notification.actions ? { label: "Later", onClick: handleLater } : undefined}
        />
      ))}
    </div>
  );
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<Banner
  title="Mobile Alert"
  description="This banner only shows on mobile devices"
  className="md:hidden mb-4" // Custom responsive display and margin
  appearance="info"
/>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the Banner component and maintain design system principles.

### Layout and Styling

✅ **Do**

```tsx
// Use className for layout positioning
<Banner
  title="Update Available"
  description="A new version is ready to install"
  className="mb-6"
  appearance="info"
/>

// Use className for responsive behavior
<Banner
  title="Desktop Feature"
  description="This feature is only available on desktop"
  className="hidden lg:flex"
  appearance="info"
/>

// Use isFull for full-width layouts
<Banner
  title="System Notice"
  description="Maintenance scheduled for tonight"
  isFull
  appearance="warning"
/>
```

❌ **Don't**

```tsx
// Don't override core banner styling
<Banner
  title="Custom Colors"
  description="Wrong styling approach"
  className="bg-base text-active"
  appearance="info"
/>

// Don't modify internal spacing
<Banner
  title="Wrong Spacing"
  description="Don't override internal gaps"
  className="gap-2 p-2"
  appearance="info"
/>

// Don't override typography classes
<Banner
  title="Bad Typography"
  description="Don't override text styles"
  className="body-3"
  appearance="info"
/>
```

### Action Button Usage

✅ **Do**

```tsx
// Provide both action and handler
<Banner
  title="Confirm Action"
  description="This action cannot be undone"
  primaryAction={{ label: "Confirm", onClick: handleConfirm }}
  appearance="warning"
/>
```

❌ **Don't**

```tsx
// Don't provide label without handler
<Banner
  title="Broken Action"
  description="This won't work properly"
  primaryAction={{ label: "Submit" }}
  appearance="error"
/>
```
