import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as IconButtonStories from './IconButton.stories';
import { IconButton } from './IconButton';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';
import { DoVsDontRow } from '../../../../.storybook/DoVsDontRow';
import { DoBlockItem } from '../../../../.storybook/DoBlock';
import { DontBlockItem } from '../../../../.storybook/DontBlock';

<Meta title='Action/IconButton' of={IconButtonStories} />

# ðŸ”˜ IconButton

<CustomTabs>
  <Tab label="Overview">

## Introduction

**IconButton** is a specialized button component that displays only an icon. It's ideal for actions that can be represented by a clear, universally understood icon, such as `close`, `settings`, or `favorite`.

## Properties

### Overview

<Canvas of={IconButtonStories.Base} />
<Controls of={IconButtonStories.Base} />

### Appearance

IconButton supports the same appearances as the standard Button:

- accent
- base (default)
- gray
- transparent
- no-background
- red

<Canvas of={IconButtonStories.AppearanceShowcase} />

### Size

IconButtons come in four different sizes:

- xs (32px)
- sm (44px)
- md (48px, default)
- lg (56px)

<Canvas of={IconButtonStories.SizesShowcase} />

### States

<Canvas of={IconButtonStories.StatesShowcase} />

### Tooltip

You can show a tooltip with the aria-label on hover via the `tooltip` prop.
The tooltip placement is customizable via the `tooltipPlacement` prop and tooltip text is customizable as well via the `tooltipText` prop.

<Canvas of={IconButtonStories.TooltipTextVariations} />

## As Child

The `asChild` prop allows integration with routing by merging IconButton styles with child elements.
This is useful when you want to use the IconButton as a child of a Link component.

<Canvas of={IconButtonStories.AsChild} />

  </Tab>
  <Tab label="Implementation">

```bash
npm install @ledgerhq/ldls-ui-react @radix-ui/react-slot
```

> **Note**: `@ledgerhq/ldls-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide â†’](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

The `@radix-ui/react-slot` dependency enables flexible composition patterns, allowing the IconButton to merge its props with child elements when needed.

## Basic Usage

```tsx
import { IconButton } from '@ledgerhq/ldls-ui-react';
import { Settings } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <IconButton
      aria-label='Open settings'
      icon={Settings}
      size='md'
      appearance='base'
      tooltip // Shows a tooltip with the aria-label on hover
    />
  );
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes for layout purposes:

```tsx
<IconButton
  aria-label='Close menu'
  icon={Close}
  className='absolute top-4 right-4' // Position the button
/>
```

### Using with Routers (asChild)

The `asChild` prop allows integration with routing libraries by merging IconButton styles with child elements:

```tsx
import { IconButton } from '@ledgerhq/ldls-ui-react';
import { Link } from 'react-router-dom';
import { Settings } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <IconButton asChild appearance='accent' aria-label='Go to settings'>
      <Link to='/settings'>
        <Settings />
      </Link>
    </IconButton>
  );
}
```

Note: When using asChild, the child element handles its own content. The icon prop is ignored - implement equivalent functionality in the child if needed.

## Do's and Don'ts

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use icon prop correctly'
      description='Import icons explicitly and let IconButton handle sizing'
    >

```tsx
import { Settings } from '@ledgerhq/ldls-ui-react/symbols';

<IconButton icon={Settings} aria-label='Settings' />;
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't import all icons"
      description='Avoid importing entire library, modifying size, or using string names'
    >

{/* prettier-ignore */}
```tsx
import * as Icons from '@ledgerhq/ldls-ui-react/symbols';

<IconButton icon={Icons.Settings} aria-label='Settings' />;

```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use className for layout'
      description='Positioning and responsive visibility are allowed'
    >

```tsx
<IconButton aria-label='Close' icon={Close} className='mt-4 ml-2' />
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't override core styling"
      description='Core styling, spacing, and icon sizing should not be modified'
    >

{/* prettier-ignore */}
```tsx
<IconButton aria-label='Settings' icon={Settings} className='bg-base' />
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Always provide descriptive aria-labels'
      description='Ensure proper accessibility for screen readers'
    >

```tsx
<IconButton aria-label='Open settings menu' />
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't omit aria-label"
      description='Avoid omitting aria-label'
    >

{/* prettier-ignore */}
```tsx
<IconButton icon={Settings} />
```

    </DontBlockItem>

  </DoVsDontRow>
</div>

  </Tab>
</CustomTabs>
