import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as ButtonStories from './Button.stories';
import { Button } from './Button';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';
import { DoVsDontRow } from '../../../../.storybook/DoVsDontRow';
import { DoBlockItem } from '../../../../.storybook/DoBlock';
import { DontBlockItem } from '../../../../.storybook/DontBlock';
import { Plus, Settings } from '../../Symbols';

<Meta title='Components/Button' of={ButtonStories} />

# ðŸ”˜ Button

<CustomTabs>
  <Tab label="Overview ">

## Introduction

Buttons are key interactive elements that trigger actions and guide users through the interface. They come in various styles and states to reflect hierarchy, intent, and context

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=9-28&m=dev).

## Anatomy

<Canvas of={ButtonStories.IconText} />

- **Label(required)**: must be present and describe the action that occurs when the button is tapped
- **Icon (optional)**: visually communicate the button's action, and helps draw attention

> Note: For **icon-only buttons**, use the [IconButton](/docs/action-iconbutton--docs) component instead. It's specifically designed for icon-only interactions with proper accessibility support.

## Properties

### Overview

<Canvas of={ButtonStories.Base} />
<Controls of={ButtonStories.Base} />

### Appearance

There are five button appearances, which indicate its emphasis. From strongest to weakest:

- accent
- base (default)
- gray
- transparent
- no-background
- red

<Canvas of={ButtonStories.AppearanceShowcase} />

### Content

Buttons' contents can be of two types:

- text (default)
- icon-text

<Canvas of={ButtonStories.ContentTypesShowcase} />

### Size

Buttons come in four different sizes:

- S (**40 px** tall)
- M (default, **48 px** tall)
- L (**56 px** tall)

> Note: For XS size (32 px tall), use the [IconButton](/docs/action-iconbutton--docs) component instead.

<Canvas of={ButtonStories.SizesShowcase} />

> **âš ï¸ Important**: Icon sizes are automatically managed by the Button component based on the selected size. Never override the icon size using className or style props, as this will break the visual consistency of the design system. The Button component ensures proper scaling and alignment of icons across all sizes.
>
> ```tsx
> // âœ… Correct: Let Button handle icon sizing
> <Button size="xs" icon={Settings} aria-label="Settings" />
>
> // âŒ Wrong: Don't override icon size [it's not gonna work even if you try]
> <Button size="xs" icon={Settings} className="w-6 h-6" aria-label="Settings" />
> ```

### States

<Canvas of={ButtonStories.StatesShowcase} />

## Responsive Layout

Buttons dynamically adapt their width to the size of their content, while keeping the default paddings:

<Canvas of={ButtonStories.ResponsiveLayout} />

When a label is too long, it's truncated to 2 lines, with a maximum width of the button's container:

<Canvas of={ButtonStories.ResponsiveLayout2} />

> The Button must dynamically resize to its container constraints.

## Accessibility

To be implemented:

- Color contrast
- Text zoom
- Keyboard navigation
- Semantic labeling

### Interactive States

<Canvas of={ButtonStories.InteractiveLoadingStates} />

### As Child

<Canvas of={ButtonStories.AsChild} />

<p className='mb-4 text-base body-2-semi-bold'>Important Notes:</p>
<ul className='space-y-2 text-base body-2'>
  <li>When using asChild, the child element receives all button styles</li>
  <li>Icon and loading props are still applied to the child element.</li>
  <li>Perfect for navigation links that should look like buttons</li>
  <li>
    Maintains semantic HTML (e.g., &lt;a&gt; for links, &lt;button&gt; for
    actions)
  </li>
</ul>

</Tab> <Tab label="Implementation ">

```bash
npm install @ledgerhq/ldls-ui-react @radix-ui/react-slot
```

> **Note**: `@ledgerhq/ldls-design-core` and other peer dependencies (`react`, `tailwindcss`, `clsx`, etc.) are required. See our [Setup Guide â†’](?path=/docs/getting-started-setup-tailwind--docs#1-tailwind-config) for complete installation and Tailwind configuration.

The `@radix-ui/react-slot` dependency enables flexible composition patterns, allowing the Button to merge its props with child elements when needed.

## Basic Usage

```tsx
import { Button } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return (
    <Button size='md' appearance='base'>
      Click me
    </Button>
  );
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes:

```tsx
<Button
  size='md'
  appearance='base'
  className='md:hidden' // Custom responsive width
>
  Custom Button
</Button>
```

### With Icons

The Button component supports icons with automatic size adjustment based on the button size:

```tsx
import { Button } from '@ledgerhq/ldls-ui-react';
import { ArrowRight } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <Button size='md' appearance='base' icon={ArrowRight}>
      Continue
    </Button>
  );
}
```

### Full Width

Use the `isFull` prop to make the button take the full width of its container:

```tsx
<Button size='md' appearance='base' isFull>
  Full Width Button
</Button>
```

### Using with Routers (asChild)

The `asChild` prop allows integration with routing libraries by merging Button styles with child elements:

```tsx
import { Button } from '@ledgerhq/ldls-ui-react';
import { Link } from 'react-router-dom';

function MyComponent() {
  return (
    <Button asChild appearance="accent" size="md">
      <Link to="/dashboard">Dashboard</RouterLink>
    </Link>
  );
}
```

Note: When using asChild, the child element handles its own content. Props like 'icon' and 'loading' are ignored - implement equivalent functionality in the child if needed.

## Do's and Don'ts

The following guidelines are based on our [Button Component API Design ADR](https://ledgerhq.atlassian.net/wiki/spaces/DLS/pages/6003949581/ADR-001+Button+Component+API+Design). These decisions were made to ensure consistency, maintainability, and proper implementation of our design system principles.

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use the icon prop'
      description='Pass icon as a component reference for proper sizing'
    >

```tsx
<Button icon={Plus} size='md'>
  Add Item
</Button>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't include icon in children"
      description='This breaks automatic sizing and alignment'
    >

{/* prettier-ignore */}
```tsx
<Button size='md'>
  <Plus /> Add Item
</Button>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Let Button handle sizing'
      description='Icon size adjusts automatically based on button size'
    >

```tsx
<Button icon={Settings} size='sm'>
  Settings
</Button>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't override icon size"
      description='Avoid className or style props that affect icon dimensions'
    >

{/* prettier-ignore */}
```tsx
<Button icon={Settings} size='sm' className='w-6 h-6'>
  Settings
</Button>
```

    </DontBlockItem>

  </DoVsDontRow>
</div>

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use className for positioning'
      description='Layout utilities like margins and display are allowed'
    >

{/* prettier-ignore */}
```tsx
<Button className='mt-4'>
  Submit
</Button>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use className for core styling"
      description='Background colors are controlled by the appearance prop'
    >

{/* prettier-ignore */}
```tsx
<Button className='bg-red-500'>
  Submit
</Button>
```

    </DontBlockItem>

  </DoVsDontRow>

</div>

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use size prop'
      description='Choose from predefined sizes: sm, md, lg'
    >

{/* prettier-ignore */}
```tsx
<Button size='sm'>
  Small Button
</Button>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use custom heights"
      description='Avoid arbitrary height values'
    >

{/* prettier-ignore */}
```tsx
<Button size='sm' className='h-[52px]'>
  Small Button
</Button>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use isFull for width'
      description='Use the isFull prop for full-width buttons'
    >

{/* prettier-ignore */}
```tsx
<Button isFull>
 Full Width
</Button>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use className for width"
      description='Avoid arbitrary width values'
    >

{/* prettier-ignore */}
```tsx
<Button className='w-full'>
  Full Width
</Button>
```

    </DontBlockItem>

  </DoVsDontRow>
</div>

> **Note**: Use `className` only for layout-related utilities (positioning, margins, display properties). The button's core styling (colors, padding, gap, hover states, borders, radius) and typography are controlled through the component's props (`appearance`, `size`) to maintain design system consistency.

</Tab>
</CustomTabs>
