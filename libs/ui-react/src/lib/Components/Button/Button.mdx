import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as ButtonStories from './Button.stories';
import { Button } from './Button';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title="Components/Button" of={ButtonStories} />

# üîò Button

<CustomTabs>
  <Tab label="Overview ">

## Introduction

Buttons are key interactive elements that trigger actions and guide users through the interface. They come in various styles and states to reflect hierarchy, intent, and context

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=9-28&m=dev).

## Anatomy

<Canvas of={ButtonStories.IconText} />

- **Label**: describes the action that occurs when the button is tapped
- **Icon (optional)**: visually communicate the button's action, and helps draw attention

## Properties

### Overview

<Canvas of={ButtonStories.Base} />
<Controls of={ButtonStories.Base} />

### Appearance

There are five button appearances, which indicate its emphasis. From strongest to weakest:

- accent
- base (default)
- gray
- transparent
- no-background
- red

<Canvas of={ButtonStories.AppearanceShowcase} />

### Content

Buttons' contents can be of three types:

- text (default)
- icon-text
- icon

<Canvas of={ButtonStories.ContentTypesShowcase} />

> Note: Buttons of the smallest size XS can't have a label, so they default to an icon only.

### Size

Buttons come in four different sizes:

- XS (**32 px** tall) **[ICON ONLY]**
- S (**44 px** tall)
- M (default, **48 px** tall)
- L (**56 px** tall)

<Canvas of={ButtonStories.SizesShowcase} />

> **‚ö†Ô∏è Important**: Icon sizes are automatically managed by the Button component based on the selected size. Never override the icon size using className or style props, as this will break the visual consistency of the design system. The Button component ensures proper scaling and alignment of icons across all sizes.
>
> ```tsx
> // ‚úÖ Correct: Let Button handle icon sizing
> <Button size="xs" icon={Settings} aria-label="Settings" />
>
> // ‚ùå Wrong: Don't override icon size [it's not gonna work even if you try]
> <Button size="xs" icon={Settings} className="w-6 h-6" aria-label="Settings" />
> ```

### States

<Canvas of={ButtonStories.StatesShowcase} />

## Responsive Layout

Buttons dynamically adapt their width to the size of their content, while keeping the default paddings:

<Canvas of={ButtonStories.ResponsiveLayout} />

When a label is too long, it's truncated to 2 lines, with a maximum width of the button's container:

<Canvas of={ButtonStories.ResponsiveLayout2} />

> The Button must dynamically resize to its container constraints.

## Accessibility

To be implemented:

- Color contrast
- Text zoom
- Keyboard navigation
- Semantic labeling

### Interactive States

<Canvas of={ButtonStories.InteractiveLoadingStates} />

### As Child

<Canvas of={ButtonStories.AsChild} />

<div className="rounded-8 mt-8 bg-muted p-12 text-base">
  <p className="mb-4 body-2-semi-bold">Important Notes:</p>
  <ul className="space-y-2 body-2">
    <li>When using asChild, the child element receives all button styles</li>
    <li>
      Icon and loading props are ignored with asChild - handle these in the
      child element
    </li>
    <li>Perfect for navigation links that should look like buttons</li>
    <li>
      Maintains semantic HTML (e.g., &lt;a&gt; for links, &lt;button&gt; for
      actions)
    </li>
  </ul>
</div>

</Tab> <Tab label="Implementation ">

## Installation

Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-react @ledgerhq/ldls-design-core

# Install peer dependencies
npm install tailwindcss@^3.4.0 react@^18.3.1 clsx tailwind-merge class-variance-authority @radix-ui/react-slot
```

#### **About @radix-ui/react-slot**

The `@radix-ui/react-slot` dependency is used internally by the Button component
to enable flexible composition patterns. It allows the Button to merge its props with child
elements when needed.

### Tailwind Configuration

To use the Button component with our custom Tailwind preset, you need to configure your `tailwind.config.ts`:

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ledgerhq/ldls-design-core';

const config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx}", // Your project's files
    "./node_modules/@ledgerhq/ldls-ui-react/dist/lib/**/*.{js,ts,jsx,tsx}" // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

### Basic Usage

```tsx
import { Button } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return (
    <Button size="md" appearance="base">
      Click me
    </Button>
  );
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes:

```tsx
<Button
  size="md"
  appearance="base"
  className="md:hidden" // Custom responsive width
>
  Custom Button
</Button>
```

### With Icons

The Button component supports icons with automatic size adjustment based on the button size:

```tsx
import { Button } from '@ledgerhq/ldls-ui-react';
import { ArrowRight } from '@ledgerhq/ldls-ui-react/symbols';

function MyComponent() {
  return (
    <Button size="md" appearance="base" icon={ArrowRight}>
      Continue
    </Button>
  );
}
```

### Full Width

Use the `isFull` prop to make the button take the full width of its container:

```tsx
<Button size="md" appearance="base" isFull>
  Full Width Button
</Button>
```

### Using with Routers (asChild)

The `asChild` prop allows integration with routing libraries by merging Button styles with child elements:

```tsx
import { Button } from '@ledgerhq/ldls-ui-react';
import { Link } from 'react-router-dom';

function MyComponent() {
  return (
    <Button asChild appearance="accent" size="md">
      <Link to="/dashboard">Dashboard</RouterLink>
    </Link>
  );
}
```

Note: When using asChild, the child element handles its own content. Props like 'icon' and 'loading' are ignored - implement equivalent functionality in the child if needed.

## Do's and Don'ts

The following guidelines are based on our [Button Component API Design ADR](https://ledgerhq.atlassian.net/wiki/spaces/DLS/pages/6003949581/ADR-001+Button+Component+API+Design). These decisions were made to ensure consistency, maintainability, and proper implementation of our design system principles.

### Content Composition

‚úÖ **Do**

```tsx
// Use children for content composition
<Button>
  Accept <em>Terms and Conditions</em>
</Button>

// Pass icon as a component reference
import { Plus } from '@ledgerhq/ldls-ui-react/symbols';
<Button icon={Plus}>Add Item</Button>
```

‚ùå **Don't**

```tsx
// Don't use text prop
<Button text="Accept Terms and Conditions" />

// Don't pass icon as a string
<Button icon="Plus">Add Item</Button>

// Don't include icon in children
<Button>
  <Plus /> Add Item
</Button>
```

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout positioning
<Button className="mt-4 ml-2">Submit</Button>

// Use className for positioning
<Button className="absolute top-0 right-0">Close</Button>

// Use className for margins and spacing in layout
<Button className="mx-auto my-4">Centered</Button>

// Use className for different positions between mobile and desktop
<Button className="hidden md:block">Desktop Only</Button>
<Button className="md:hidden">Mobile Only</Button>
```

‚ùå **Don't**

```tsx
// Don't override button's core styling
<Button className="bg-base">Custom Background</Button>

// Don't modify internal spacing/padding
<Button className="gap-4 p-6">Wrong Spacing</Button>

// Don't override typography - use size prop instead
<Button className="heading-2">Wrong Typography</Button>

// Don't modify hover/focus states
<Button className="hover:bg-interactive-hover">Custom Hover</Button>

// Don't override button's border styling
<Button className="border-2 border-interactive">Custom Border</Button>

// Don't override button's radius
<Button className="rounded-full">Custom Radius</Button>
```

> **Note**: Use `className` only for layout-related utilities (positioning, margins, display properties). The button's core styling (colors, padding, gap, hover states, etc.) and typography should be controlled through the component's props (`appearance`, `size`) to maintain design system consistency. Typography classes are handled automatically based on the button's `size` prop.

### Icon Usage

‚úÖ **Do**

```tsx
// Import icons explicitly
import { Settings, Plus } from '@ledgerhq/ldls-ui-react/symbols';

// Use icon prop for consistent sizing
<Button icon={Settings} contentType="icon" aria-label="Settings" />

// Let Button handle icon sizing
<Button icon={Plus} size="xs">Add</Button>
```

‚ùå **Don't**

```tsx
// Don't import entire icon library
import * as Icons from '@ledgerhq/ldls-ui-react/symbols';

// Don't modify icon size directly
<Button>
  <Settings size={24} />
  Settings
</Button>

// Don't use string-based icon names
<Button icon="settings">Settings</Button>
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Import specific icons for better tree-shaking
import { Plus } from '@ledgerhq/ldls-ui-react/symbols';

// Use appropriate size variant
<Button size="xs" icon={Plus} aria-label="Add" />

// Use semantic labels for accessibility
<Button icon={Settings} contentType="icon" aria-label="Open Settings" />
```

‚ùå **Don't**

```tsx
// Don't import all icons
import * as AllIcons from '@ledgerhq/ldls-ui-react/symbols';

// Don't use custom sizes when standard ones exist
<Button className="h-[52px]">Custom Height</Button>

// Don't omit aria-label for icon-only buttons
<Button icon={Settings} contentType="icon" />
```

</Tab>
</CustomTabs>
