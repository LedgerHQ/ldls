import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as TooltipStories from './Tooltip.stories';
import { Tooltip, TooltipTrigger, TooltipContent } from './Tooltip';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title='Components/Tooltip' of={TooltipStories} />

# üí¨ Tooltip

<CustomTabs>
  <Tab label="Overview">

## Introduction

Tooltips provide contextual information on hover or focus, helping users understand interface elements without cluttering the main UI. They feature smooth animations and a thoughtful default delay for optimal user experience.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=6387-409).

## Features

- **Smart Default Delay**: 200ms delay before showing to prevent accidental triggers
- **Smooth Animations**: Direction-based slide animations for both entry and exit
- **Accessible**: Proper focus handling and screen reader support

## Anatomy

<Canvas of={TooltipStories.Basic} />

- **Trigger**: The element that activates the tooltip on hover or focus
- **Content**: The informational text or content displayed with smooth animations
- **Arrow**: Visual connector pointing to the trigger

## Properties

### Placement & Animations

Each placement comes with its own directional slide animation:

- top (default): Slides in from top
- bottom: Slides in from bottom
- left: Slides in from left
- right: Slides in from right

<Canvas of={TooltipStories.AnimatedPlacements} />

### Timing & Delay

The tooltip has a default 200ms delay before showing, which can be customized:

<Canvas of={TooltipStories.CustomDelay} />

### Content

Tooltips animate smoothly regardless of content length:

<Canvas of={TooltipStories.LongContent} />

### Trigger Types

Works with any trigger while maintaining smooth animations:

<Canvas of={TooltipStories.WithIconTrigger} />

## Accessibility

- Default 200ms delay helps prevent tooltip flicker
- Smooth animations improve visual experience
- Proper ARIA attributes for screen readers
- Keyboard focus triggers animations

<div className='rounded-8 mt-8 bg-muted p-12'>
  <p className='mb-4 body-2-semi-bold'>Important Notes:</p>
  <ul className='space-y-2 body-2'>
    <li>200ms default delay provides optimal user experience</li>
    <li>Animations match tooltip placement for intuitive feedback</li>
    <li>Content transitions smoothly in and out</li>
    <li>All animations respect reduced-motion preferences</li>
  </ul>
</div>

  </Tab>
  <Tab label="Implementation">

## Installation

Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-react @ledgerhq/ldls-design-core

# Install peer dependencies (including for Tooltip)
npm install tailwindcss@^3.4.0 react@^18.3.1 clsx tailwind-merge class-variance-authority @radix-ui/react-tooltip
```

#### **About @radix-ui/react-tooltip**

The `@radix-ui/react-tooltip` is used as the primitive for accessible tooltip behavior, enhanced with our custom animations and styling.

### Basic Usage with Animations

```tsx
import { Tooltip, TooltipTrigger, TooltipContent, Button } from '@ledgerhq/ldls-ui-react';

function MyComponent() {
  return (
    <Tooltip>
      <TooltipTrigger asChild>
        <Button>Hover me</Button>
      </TooltipTrigger>
      <TooltipContent>
        Tooltip with automatic animations
      </TooltipContent>
    </Tooltip>
  );
}
```

### Placement with Directional Animations

```tsx
// Each placement has its own directional animation
<Tooltip>
  <TooltipTrigger>Hover</TooltipTrigger>
  <TooltipContent side="right">
    Slides in from the right
  </TooltipContent>
</Tooltip>

<Tooltip>
  <TooltipTrigger>Hover</TooltipTrigger>
  <TooltipContent side="top">
    Slides in from the top
  </TooltipContent>
</Tooltip>
```

### Custom Delay Duration

```tsx
// Override the default 200ms delay
<Tooltip delayDuration={500}>
  <TooltipTrigger>Hover</TooltipTrigger>
  <TooltipContent>
    Shows after 500ms
  </TooltipContent>
</Tooltip>

// Instant tooltip
<Tooltip delayDuration={0}>
  <TooltipTrigger>Hover</TooltipTrigger>
  <TooltipContent>
    Shows immediately
  </TooltipContent>
</Tooltip>
```

### Global Provider with Default Delay

```tsx
import { TooltipProvider } from '@ledgerhq/ldls-ui-react';

function App() {
  return (
    <TooltipProvider delayDuration={200}> {/* Default delay */}
      {/* Your app content */}
    </TooltipProvider>
  );
}
```

## Animation Details

The tooltip uses smooth slide animations that match its placement:

```tsx
// Animation classes are automatically applied based on side prop
<TooltipContent side="top">    // Slides from top
<TooltipContent side="bottom"> // Slides from bottom
<TooltipContent side="left">   // Slides from left
<TooltipContent side="right">  // Slides from right

// Animations are handled automatically on both enter and exit
// Entry: animate-slideInFrom{Direction}
// Exit: data-[state=closed]:animate-slideOutTo{Direction}
```

## Do's and Don'ts

### Timing and Animation

‚úÖ **Do**

```tsx
// Use the default 200ms delay for consistent experience
<Tooltip>
  <TooltipTrigger>Hover</TooltipTrigger>
  <TooltipContent>Default delay</TooltipContent>
</Tooltip>

// Let animations handle themselves
<TooltipContent side="right">
  Auto-animated content
</TooltipContent>
```

‚ùå **Don't**

```tsx
// Don't use instant tooltips unless necessary
<Tooltip delayDuration={0}>
  <TooltipContent>Instant show</TooltipContent>
</Tooltip>

// Don't override animation classes
<TooltipContent className="animate-none">
  No animations
</TooltipContent>
```

### Composition

‚úÖ **Do**

```tsx
// Use asChild for trigger composition
<Tooltip>
  <TooltipTrigger asChild>
    <Button>Hover</Button>
  </TooltipTrigger>
  <TooltipContent>Animated info</TooltipContent>
</Tooltip>

// Keep content simple for smooth animations
<TooltipContent>
  <p>Clean content</p>
</TooltipContent>
```

‚ùå **Don't**

```tsx
// Don't nest tooltips
<Tooltip>
  <TooltipTrigger>
    <Tooltip> {/* Invalid nesting */}
    </Tooltip>
  </TooltipTrigger>
</Tooltip>

// Don't put heavy content that might affect animations
<TooltipContent>
  <ComplexComponent />
</TooltipContent>
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Use global provider for consistent delays
<TooltipProvider delayDuration={200}>
  <App />
</TooltipProvider>

// Keep content light for smooth animations
<TooltipContent>Short text</TooltipContent>
```

‚ùå **Don't**

```tsx
// Don't set extremely long delays
<Tooltip delayDuration={2000}>
  Too long delay
</Tooltip>

// Don't override animation timing
<TooltipContent className="duration-1000">
  Custom duration
</TooltipContent>
```

  </Tab>
</CustomTabs>
