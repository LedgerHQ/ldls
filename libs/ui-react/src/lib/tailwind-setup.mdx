import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Tailwind/Setup guide" />

# Tailwind CSS Setup

## Prerequisites

This UI kit is built on top of a custom Tailwind CSS preset that provides consistent styling across the Ledger Design System. Before you can use the components, you'll need to set up Tailwind CSS in your project.

> **Note:** This guide assumes you already have Tailwind CSS v3.x installed in your project. Our Design System is built and tested with Tailwind CSS v3. If you haven't installed Tailwind CSS yet, please follow the [official Tailwind CSS installation guide](https://v3.tailwindcss.com/docs/installation) first. This documentation focuses on integrating our Design System with your existing Tailwind setup.

Before installing the packages, make sure to configure your `.npmrc` file with the Ledger registry:

```bash
# .npmrc
@ldls:registry=https://jfrog.ledgerlabs.net/artifactory/api/npm/ldls-npm-prod-public/
```

**Note: You'll need to be connected to the Ledger VPN and logged in npm to access the registry.**

```bash
npm login --registry=https://jfrog.ledgerlabs.net/artifactory/api/npm/ldls-npm-prod-public/
```

Then you can install `design-core` and `ui-react` packages:

```bash
npm install @ldls/design-core
npm install @ldls/ui-react
```

## Configuration

### 1. Tailwind Config

Create or update your `tailwind.config.ts` (or `tailwind.config.js`) to use our preset.

Available presets are: `ledgerLivePreset`, `websitesPreset`, `enterprisePreset`.

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ldls/design-core';

const config = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx}", // Your project's files
    "./node_modules/@ldls/ui-react/dist/lib/**/*.{js,ts,jsx,tsx}" // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

## Developer Experience

### VSCode Extensions and Setup

For the best development experience, we recommend the following setup:

1. **Tailwind CSS IntelliSense** ([bradlc.vscode-tailwindcss](https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss))
   - Provides autocomplete for Tailwind classes
   - Shows class definitions on hover
   - Syntax highlighting for Tailwind classes
   - Linting for class order and conflicts
   - Add to your VSCode settings:
     ```json
     {
       "editor.defaultFormatter": "esbenp.prettier-vscode",
       "tailwindCSS.classFunctions": ["cva", "cn"],
       "tailwindCSS.experimental.classRegex": [
         ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"]
       ]
     }
     ```

2. **Prettier Plugin Tailwind** ([prettier-plugin-tailwindcss](https://github.com/tailwindlabs/prettier-plugin-tailwindcss))
   - Automatically sorts Tailwind classes in a consistent order
   - Install with:
     ```bash
     npm install -D prettier prettier-plugin-tailwindcss
     ```

### Utility Functions

We recommend creating utility functions to help you work with Tailwind classes. Here's how to create powerful utilities that handle conditional classes, Tailwind class conflicts, and type-safe variants:

**Creating Class Names Utility**

First, install the required packages:

```bash
npm install clsx tailwind-merge
# or
yarn add clsx tailwind-merge
# or
pnpm add clsx tailwind-merge
```

Then create your class names utility file (e.g., `utils/cn.ts`):

```typescript
import { ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

This utility combines the power of two popular libraries:

- `clsx`: Handles conditional class names
- `tailwind-merge`: Intelligently handles Tailwind CSS class conflicts

Example usage of cn utility:

```typescript
import { cn } from '../utils/cn';

// Basic usage
<div className={cn(
  "base-class",
  isActive && "active-class",
  variant === "large" && "large-class"
)}>

// With conditional objects
<div className={cn(
  "px-4 py-2 rounded",
  {
    "bg-accent": isAccent,
    "bg-base": !isAccent,
    "bg-disabled": isDisabled
  }
)}>

// Merging with component classes - handles Tailwind conflicts!
<Component
  className={cn(
    "body-1 md:body-2", // Base styles
    "body-2 md:body-3"  // Override - properly merges breakpoints
  )}
/>
```

**Creating Component Variants Utility**

For type-safe component variants, we use class-variance-authority. First, install the package:

```bash
npm install class-variance-authority
# or
yarn add class-variance-authority
# or
pnpm add class-variance-authority
```

`class-variance-authority` provides:

- Simple way to define component variants
- Type-safe variant options
- Default values for variants
- Easy composition with other classes

## Support

If you encounter any issues with the setup:

- Check that all dependencies are correctly installed
- Verify your configuration matches the examples above
- Ensure your IDE extensions are properly configured
- Reach out to our Design System team if issues persist

## Next Steps

Once you have everything configured, check out our [Button component](?path=/docs/components-button-implementation--docs) documentation for usage examples and best practices on how to use it.
