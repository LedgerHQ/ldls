import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as CardButtonStories from './CardButton.stories';
import { CardButton } from './CardButton';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title='Action/CardButton' of={CardButtonStories} />

# üÉè CardButton

<CustomTabs>
  <Tab label="Overview">

## Introduction

CardButtons are interactive elements designed for presenting options, settings, or navigation items in a card-like format for React Native applications. They provide a structured way to display a title and optional description, icon, and navigation chevron, making them ideal for menus, settings panels, and option lists in mobile and native applications.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=89-525&m=dev).

## Anatomy

<Canvas of={CardButtonStories.FullFeatures} />

- **Icon (optional)**: visually communicates the card's purpose or category
- **Title**: the main label describing the action or option
- **Description (optional)**: provides additional context or explanation
- **Hide chevron (optional)**: hides the chevron right icon that is displayed by default on the right side

## Properties

### Overview

<Canvas of={CardButtonStories.Base} />
<Controls of={CardButtonStories.Base} />

### Appearance

There are two CardButton appearances, indicating different visual emphasis:

- **base** (default): solid background for primary options
- **outline**: dashed outline for secondary or alternative options

<Canvas of={CardButtonStories.AppearanceShowcase} />

### Content Variations

CardButtons support flexible content combinations to suit different use cases:

- **Title + Description**: provides additional explanation
- **Title + Icon + Description**: combines visual context with detailed explanation for enhanced clarity
- **Title + Description + Chevron**: provides detailed explanation with clear navigation indication
- **Complete card**: combines all elements for rich, informative options
- **Title + Icon**: adds visual context to the option
- **Title + Chevron**: indicates navigation or expansion

<Canvas of={CardButtonStories.ContentVariations} />

> **Note**: The title is required, while icon, description, and hideChevron are all optional and can be combined as needed.

### States

CardButtons support standard interactive states for both appearance variants:

<Canvas of={CardButtonStories.StatesShowcase} />

### Width Behavior

CardButtons naturally flow within their containers and adapt their width based on content:

<Canvas of={CardButtonStories.NaturalWidth} />

## Responsive Layout

CardButtons automatically adapt to their container constraints while maintaining proper content layout:

<Canvas of={CardButtonStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - CardButtons flow naturally to fit their parent container width
> - Container elements control the button width, not the component itself
> - Long titles and descriptions automatically wrap and truncate as needed
> - Icons (including the chevron) maintain fixed sizes for visual consistency

## Touch Interactions

The CardButton component is built on Pressable and provides:

- **Touch feedback**: Visual indication when pressed through opacity changes
- **Disabled state**: Prevents touch interactions when disabled prop is true
- **Accessibility**: Built-in support for screen readers and assistive technologies

## Accessibility

To be implemented:

- **Color contrast**: ensure sufficient contrast for all appearance variants
- **Text zoom**: maintain usability when text is enlarged
- **Touch target size**: minimum 44pt touch targets for accessibility compliance
- **Semantic labeling**: proper accessibility attributes for screen readers
- **Focus management**: clear focus indicators and logical navigation order
- **Voice control**: support for voice-based navigation

</Tab>
<Tab label="Implementation">
## Setup
Install and set up the library with our [Setup Guide ‚Üí](?path=/docs/getting-started-setup--docs).

### Basic Usage

```tsx
import { CardButton } from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return (
    <CardButton
      title='Payment Method'
      description='Add or edit your payment information'
      appearance='base'
      onPress={() => console.log('Card button pressed')}
    />
  );
}
```

### With Icon

The CardButton component supports icons that automatically scale to 24px size:

```tsx
import { CardButton } from '@ledgerhq/ldls-ui-rnative';
import { CreditCard } from '@ledgerhq/ldls-ui-rnative/symbols';

function MyComponent() {
  return (
    <CardButton
      icon={CreditCard}
      title='Payment Method'
      description='Add or edit your payment information'
      appearance='base'
      onPress={() => console.log('Payment method pressed')}
    />
  );
}
```

### Without Chevron

By default, a ChevronRight icon will be rendered on the right side. Use the `hideChevron` prop to hide it:

```tsx
<CardButton
  title='Settings'
  description='Configure your account preferences'
  hideChevron
  appearance='base'
  onPress={() => console.log('Settings pressed')}
/>
```

### Natural Width Behavior

CardButtons automatically flow to fit their parent container width. No additional props are needed:

```tsx
<CardButton
  title='Continue Setup'
  description='Complete your account configuration'
  appearance='base'
  onPress={() => console.log('Continue pressed')}
/>
```

To control card button width, use container elements:

```tsx
import { View } from 'react-native';

{
  /* Full container width */
}
<CardButton
  title='Full Width'
  description='This button fills the container width'
  onPress={() => console.log('Full width pressed')}
/>;

{
  /* Constrained width */
}
<View style={{ maxWidth: 300 }}>
  <CardButton
    title='Constrained'
    description='This button is limited by its container'
    onPress={() => console.log('Constrained pressed')}
  />
</View>;

{
  /* Using NativeWind classes */
}
<View className='max-w-md'>
  <CardButton
    title='Responsive'
    description='Width adapts based on container'
    onPress={() => console.log('Responsive pressed')}
  />
</View>;
```

### Outline Appearance

Use the outline appearance for a more subtle card style:

```tsx
<CardButton
  title='Optional Feature'
  description='Enable this feature for enhanced functionality'
  appearance='outline'
  onPress={() => console.log('Optional feature pressed')}
/>
```

### Disabled State

Disable the card button to prevent user interaction:

```tsx
<CardButton
  title='Unavailable Option'
  description='This option is currently unavailable'
  appearance='base'
  disabled={true}
/>
```

### Custom Styling

While the component comes with predefined styles, you can extend them using NativeWind classes for layout purposes:

```tsx
<CardButton
  title='Mobile Only'
  description='This option is only available on mobile'
  className='mt-4 mx-2' // Custom margins
  appearance='base'
  onPress={() => console.log('Mobile only pressed')}
/>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the CardButton component and maintain design system principles.

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout positioning
<CardButton
  title="Payment"
  description="Manage payment methods"
  className="mt-4 ml-2"
  onPress={() => console.log('Payment pressed')}
/>

// Use container elements to control button width
<View className="max-w-md">
  <CardButton
    title="Continue"
    description="Proceed to the next step"
    onPress={() => console.log('Continue pressed')}
  />
</View>

// Use className for responsive behavior
<CardButton
  title="Desktop Feature"
  description="This feature is only available on desktop"
  className="hidden md:block"
/>
```

‚ùå **Don't**

```tsx
// Don't override core button styling
<CardButton
  title="Custom"
  description="Wrong styling"
  className="bg-black text-white"
  onPress={() => console.log('Wrong styling')}
/>

// Don't modify internal spacing
<CardButton
  title="Wrong"
  description="Don't do this"
  className="gap-8 p-6"
  onPress={() => console.log('Wrong spacing')}
/>

// Don't override typography classes
<CardButton
  title="Bad"
  description="Typography override"
  className="heading-2"
  onPress={() => console.log('Bad typography')}
/>

// Don't modify border radius or outline styles
<CardButton
  title="Wrong"
  description="Don't override borders"
  className="rounded-full border-2"
  appearance="outline"
  onPress={() => console.log('Wrong borders')}
/>
```

### Icon Usage

‚úÖ **Do**

```tsx
// Import icons explicitly for better tree-shaking
import { Settings, CreditCard, Shield } from '@ledgerhq/ldls-ui-rnative/symbols';

// Use semantically appropriate icons
<CardButton
  icon={Settings}
  title="Settings"
  description="Configure your preferences"
  onPress={() => console.log('Settings pressed')}
/>

// Let CardButton handle icon sizing automatically
<CardButton
  icon={CreditCard}
  title="Payment"
  description="Manage payment methods"
  onPress={() => console.log('Payment pressed')}
/>
```

‚ùå **Don't**

```tsx
// Don't import entire icon library
import * as Icons from '@ledgerhq/ldls-ui-rnative/symbols';

// Don't try to customize icon size
<CardButton
  title="Wrong"
  description="Don't customize icon size"
  icon={() => <Settings size={20} />}
  onPress={() => console.log('Wrong icon size')}
/>

// Don't use string-based icon references
<CardButton
  icon="settings" // Wrong - should be component reference
  title="Settings"
  description="Configure preferences"
  onPress={() => console.log('String icon')}
/>
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Import specific icons for better tree-shaking
import { CreditCard } from '@ledgerhq/ldls-ui-rnative/symbols';

// Use proper event handlers
<CardButton
  title='Process Payment'
  description='Complete your transaction'
  onPress={handlePayment}
/>;
```

‚ùå **Don't**

```tsx
// Don't import all icons
import * as AllIcons from '@ledgerhq/ldls-ui-rnative/symbols';

// Don't use inline functions for complex operations
<CardButton
  title='Complex Action'
  description='This will take some time'
  onPress={() => {
    // Complex inline logic here...
    performComplexOperation();
    updateMultipleStates();
    makeAPICall();
  }}
/>;
```

</Tab>
</CustomTabs>
