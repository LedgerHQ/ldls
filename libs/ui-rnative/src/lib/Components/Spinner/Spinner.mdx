import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';
import * as SpinnerStories from './Spinner.stories';

<Meta title='Communication/Spinner/Docs' of={SpinnerStories} />

# üåÄ Spinner

<CustomTabs>
  <Tab label="Overview">

The Spinner component provides visual feedback for loading states and background processes. It's a crucial element for maintaining user engagement during asynchronous operations and preventing perceived delays.

## Figma Library

All spinner designs are created and managed in our components library. This ensures consistency across all platforms and use cases.

- üîó **[Figma - Components Library](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=9023-3681&m=dev)**

## Interactive Example

<Canvas of={SpinnerStories.Base} />
<Controls of={SpinnerStories.Base} />

## üé® Appearances

The Spinner component is designed to inherit text color from its parent, making it especially versatile when used inside a button, it will automatically match the button's label color for seamless integration. By default, it adopts the primary text color (`text-base`), but you can easily emphasize it using accent colors (such as `text-interactive`).

Additionally, you can customize the spinner's appearance by applying your own styles with the `className` prop, allowing for further flexibility to match any specific design requirement.

---

## üìè Sizing

Our spinners are designed to be scalable and available in 7 standard sizes to fit various contexts within the UI, matching our icon sizing system for consistency. The available sizes are: **12, 16, 20, 24, 40, 48** and **56** pixels.

<Canvas of={SpinnerStories.Sizes} />

---

## Usage Guidelines

### When to Use

- **Loading States**: During data fetching, form submissions, or content loading
- **Background Processes**: When operations take longer than 1-2 seconds
- **Screen Transitions**: During navigation between views or routes
- **Button Actions**: Within buttons to indicate processing

### When Not to Use

- **Very Quick Operations**: For processes under 1 second
- **Static Content**: Don't use spinners for content that's already loaded

</Tab>
<Tab label="Implementation">

## Installation

Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-rnative @ledgerhq/ldls-design-core

# Install peer dependencies
npm install react@~18.3.1 react-native@~0.77.3 react-native-svg@^15.0.0 nativewind@^4.1.23
```

### NativeWind Configuration

To use Spinner components with our custom NativeWind preset, you need to configure your `tailwind.config.ts`:

```typescript
import type { Config } from 'tailwindcss';
import { ledgerLivePreset } from '@ledgerhq/ldls-design-core';

const config = {
  content: [
    './src/**/*.{js,ts,jsx,tsx}', // Your project's files
    './node_modules/@ledgerhq/ldls-ui-rnative/src/**/*.{js,ts,jsx,tsx}', // Ledger UI Kit components
  ],
  presets: [ledgerLivePreset], // the installed tailwind preset
} satisfies Config;

export default config;
```

### Basic Usage

Import and use the Spinner component:

```tsx
import React, { useState } from 'react';
import { View } from 'react-native';
import { Spinner } from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  const [isLoading, setIsLoading] = useState(false);

  return <View>{isLoading && <Spinner />}</View>;
}
```

### Size Variants

Spinners support predefined size variants that ensure consistent visual hierarchy:

```tsx
import React from 'react';
import { View } from 'react-native';
import { Spinner } from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return (
    <View className='flex flex-row items-center gap-4'>
      <Spinner size={12} />
      <Spinner size={16} />
      <Spinner size={20} />
    </View>
  );
}
```

## Do's and Don'ts

### Size Usage

‚úÖ **Do**

```tsx
// Match spinner size to context
<Spinner size={12} /> // For small inline loading
<Spinner size={40} /> // For prominent loading states
```

‚ùå **Don't**

```tsx
// Don't override the spinner's size
<Spinner className="w-6 h-6" />
<Spinner size={24} width={32} height={32} />

// Don't use non-standard sizes
<Spinner size={22} />
```

### Loading States

‚úÖ **Do**

```tsx
// Show spinners for operations over 1-2 seconds
{isLoading && <Spinner />}

// Provide context with descriptive text
<View className="flex flex-row items-center gap-2">
  <Spinner size={16} />
  <Text>Syncing wallet...</Text>
</View>

// Disable interactions during loading
<Button disabled={isLoading}>
  {isLoading ? <Spinner size={16} /> : 'Submit'}
</Button>
```

‚ùå **Don't**

```tsx
// Don't show spinners for instant operations
const data = getLocalData(); // Synchronous
return <Spinner />; // Not needed

// Don't modify or disable animation properties
<Spinner className="animate-bounce" />
<Spinner className="animate-none" />
```

</Tab>
</CustomTabs>
