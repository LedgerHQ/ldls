import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import { Box } from '../Utility';
import * as ListItemStories from './ListItem.stories';
import { ListItem } from './ListItem';
import { CustomTabs, Tab } from '../../../../.storybook/components';
import CommonRulesDoAndDont from '../../../../.storybook/docs/CommonRulesDoAndDont.mdx';

<Meta title='Components/ListItem' of={ListItemStories} />

# ðŸ“‹ ListItem

<CustomTabs>
  <Tab label="Overview">

## Introduction

ListItems are flexible interactive elements designed for lists in React Native applications. They provide a structured way to display a title with optional description, leading content (usually a Spot), description tag, and flexible trailing content with native touch interactions.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=2255-4155).

## Anatomy

<Canvas of={ListItemStories.Base} />

- **Title**: The main label of the item (required)
- **Leading Content (optional)**: Visually represents the item's category or action, usually using a Spot component
- **Description (optional)**: Provides additional context
- **Description Tag (optional)**: Small tag next to description for status or labels
- **Trailing Content (optional)**: Arbitrary content to be displayed on the right side

## Properties

### Overview

<Canvas of={ListItemStories.Base} />
<Controls of={ListItemStories.Base} />

### Trailing Content Variants

ListItems support arbitrary trailing content to suit different interaction patterns:

- **caret**: Navigation indicator (chevron right)
- **value**: Displays a primary value with optional subvalue
- **tag**: Shows a tag for status or category
- **icon**: Custom trailing icon

<Canvas of={ListItemStories.TrailingContentVariantsShowcase} />

### States

ListItems support standard states including active and disabled for touch interactions.

<Canvas of={ListItemStories.StateShowcase} />

## Responsive Layout

ListItems adapt to their container width, truncating long titles and descriptions as needed.

<Canvas of={ListItemStories.ResponsiveLayout} />

> **Key behaviors:**
>
> - Automatically fits container width
> - Title truncates to one line
> - Description truncates to one line
> - Icons and trailing content maintain fixed sizes

## Accessibility

React Native ListItem includes:

- Native touch feedback with `Pressable`
- Proper text truncation with ellipsis
- Disabled state handling
- Screen reader support through React Native's accessibility features

</Tab>
<Tab label="Implementation">

## Setup

Install and set up the library with our [Setup Guide â†’](?path=/docs/getting-started-setup--docs).

### Basic Usage

```tsx
import { ListItem } from '@ledgerhq/lumen-ui-rnative';
import { ChevronRight } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ListItem
      title='Settings'
      trailingContent={<ChevronRight size={24} />}
      onPress={() => console.log('Pressed!')}
    />
  );
}
```

### With Description

Add a description below the title for additional context:

```tsx
import { ListItem } from '@ledgerhq/lumen-ui-rnative';
import { ChevronRight } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ListItem
      title='Account Settings'
      description='Manage your profile and preferences'
      trailingContent={<ChevronRight size={24} />}
      onPress={() => console.log('Pressed!')}
    />
  );
}
```

### With Leading Content

Include a Spot component as leading icon for visual identification:

```tsx
import { ListItem, Spot } from '@ledgerhq/lumen-ui-rnative';
import { Settings, ChevronRight } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ListItem
      title='Settings'
      description='Manage your profile and preferences'
      leadingContent={<Spot appearance='icon' icon={Settings} />}
      trailingContent={<ChevronRight size={24} />}
      onPress={() => console.log('Pressed!')}
    />
  );
}
```

### Trailing Content

The ListItem supports arbitrary trailing content variants. Below are some examples:

```tsx
import { ListItem, Spot, Tag, Box, Text } from '@ledgerhq/lumen-ui-rnative';
import {
  Settings,
  PenEdit,
  ChevronRight,
  User,
} from '@ledgerhq/lumen-ui-rnative/symbols';

function ListVariants() {
  return (
    <Box lx={{ flexDirection: 'column', gap: 's0', maxWidth: 's320' }}>
      {/* Chevron - For navigation items */}
      <ListItem
        title='Chevron Variant'
        description='With description'
        leadingContent={<Spot appearance='icon' icon={User} />}
        trailingContent={<ChevronRight size={24} />}
        onPress={() => console.log('Navigate')}
      />

      {/* Value - For displaying values */}
      <ListItem
        title='Account Balance'
        description='Current available funds'
        leadingContent={<Spot appearance='icon' icon={User} />}
        trailingContent={
          <Box lx={{ alignItems: 'flex-end' }}>
            <Text typography='body2SemiBold'>42.00</Text>
            <Text typography='body3' lx={{ color: 'muted' }}>
              USD
            </Text>
          </Box>
        }
        onPress={() => console.log('View balance')}
      />

      {/* Tag - For status indicators */}
      <ListItem
        title='New Feature'
        description='Recently added functionality'
        leadingContent={<Spot appearance='icon' icon={User} />}
        trailingContent={<Tag label='New' appearance='accent' />}
        onPress={() => console.log('View feature')}
      />

      {/* Icon - For trailing icons */}
      <ListItem
        title='Edit Profile'
        description='Modify your information'
        leadingContent={<Spot appearance='icon' icon={User} />}
        trailingContent={<PenEdit size={24} />}
        onPress={() => console.log('Edit')}
      />

      {/* None - No trailing content */}
      <ListItem
        title='Simple Item'
        description='No trailing elements'
        leadingContent={<Spot appearance='icon' icon={User} />}
        onPress={() => console.log('Simple action')}
      />
    </Box>
  );
}
```

### With Description Tag

Add a tag to the description for additional status information:

```tsx
import { ListItem, Tag } from '@ledgerhq/lumen-ui-rnative';
import { Bolt, ChevronRight } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <ListItem
      title='New Item'
      description='Recently added'
      descriptionTag={
        <Tag label='New' appearance='accent' icon={Bolt} size='sm' />
      }
      trailingContent={<ChevronRight size={24} />}
      onPress={() => console.log('Pressed!')}
    />
  );
}
```

### Disabled State

Disable the ListItem to prevent interaction:

```tsx
<ListItem title='Disabled Option' description='Cannot be changed' disabled />
```

### Responsive Layout

ListItem handles truncation responsively. Use `Box` to control the container:

```tsx
import { ListItem, Spot, Box } from '@ledgerhq/lumen-ui-rnative';
import { User, ChevronRight } from '@ledgerhq/lumen-ui-rnative/symbols';

<Box lx={{ width: 's256', backgroundColor: 'base', padding: 's4' }}>
  <ListItem
    title='Very Long Title That Will Truncate'
    description='Very long description that will also truncate appropriately'
    leadingContent={<Spot appearance='icon' icon={User} />}
    trailingContent={<ChevronRight size={24} />}
    onPress={() => console.log('Pressed!')}
  />
</Box>
```

### Custom Styling

Use `lx` prop for layout purposes only, such as maximum width:

```tsx
<ListItem
  title='Constrained Width'
  description='This item has a maximum width applied'
  lx={{ maxWidth: 's320' }}
  onPress={() => console.log('Pressed!')}
/>
```

## Do's and Don'ts

<Box lx={{ flexDirection: 'column', gap: 's24' }}>
  <CommonRulesDoAndDont />
</Box>

</Tab>
</CustomTabs>
