import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as TooltipStories from './Tooltip.stories';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title='Communication/Tooltip' of={TooltipStories} />

# üí¨ Tooltip

<CustomTabs>
  <Tab label="Overview">

View in Figma: [link](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=1234-5678&m=dev)

## Introduction

Tooltips display contextual information in a bottom sheet when users press an interactive element. They're designed for mobile interfaces where hover states don't exist.

## Anatomy

- **TooltipTrigger:** The interactive element that opens the tooltip
- **TooltipContent:** Defines the title and content displayed in the bottom sheet
- **TooltipsBottomSheet:** The shared bottom sheet that renders all tooltip content

## Properties

### Base Example

<Canvas of={TooltipStories.Base} />

### With Custom Content

Tooltips can contain rich content including text, buttons, and custom layouts.

<Canvas of={TooltipStories.WithCustomContent} />

### Multiple Tooltips

Multiple tooltips can be used on the same page. Only one tooltip displays at a time.

<Canvas of={TooltipStories.WithMultipleTooltips} />

### With Change Callback
When the tooltip is opened or closed, the `onOpenChange` callback is called with the new open state.
<Canvas of={TooltipStories.WithChangeCallback} />

### Accessibility

- Tooltips use bottom sheets for better touch interaction on mobile
- Content is announced by screen readers
- Dismissible via backdrop press or swipe gesture

</Tab>
<Tab label="Implementation">

## Setup

Install and set up the library with our [Setup Guide ‚Üí](?path=/docs/getting-started-setup--docs).

### Requirements

To use tooltips, you must include two global components in your app setup:

1. **ThemeProvider** ‚Äì Wrap your entire app and register theme and shared components context.
2. **TooltipsBottomSheet** ‚Äì Instance of the bottom sheet component that will be used to display the tooltip content.

```tsx
import { ThemeProvider } from '@ledgerhq/ldls-ui-rnative';
import { TooltipsBottomSheet } from '@ledgerhq/ldls-ui-rnative';

function App() {
  return (
    <ThemeProvider>
      <YourAppContent />
      <TooltipsBottomSheet />
    </ThemeProvider>
  );
}
```

### Basic Usage

```tsx
import {
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/ldls-ui-rnative';
import { Button } from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return (
    <Tooltip>
      <TooltipTrigger asChild>
        <Button>Help</Button>
      </TooltipTrigger>
      <TooltipContent
        title='Help Information'
        content={<Text>This is helpful information about the feature.</Text>}
      />
    </Tooltip>
  );
}
```

### With Custom Content

```tsx
<Tooltip>
  <TooltipTrigger asChild>
    <InteractiveIcon iconType='filled'>
      <Information />
    </InteractiveIcon>
  </TooltipTrigger>
  <TooltipContent
    title='Feature Details'
    content={
      <View className='flex gap-12'>
        <Text className='text-muted'>
          Detailed explanation with rich formatting.
        </Text>
        <Button size='xs' appearance='accent'>
          Learn More
        </Button>
      </View>
    }
  />
</Tooltip>
```

### Callback function

```tsx
function CallbackFunctionTooltip() {

  return (
    <Tooltip onOpenChange={() => {
      // do stuff
    }}>
      <TooltipTrigger asChild>
        <Button>Toggle Tooltip</Button>
      </TooltipTrigger>
      <TooltipContent title='Controlled' content={<Text>Content</Text>} />
    </Tooltip>
  );
}
```

## Do's and Don'ts

### Trigger Usage

‚úÖ **Do**

```tsx
// Use asChild to merge props with existing components
<TooltipTrigger asChild>
  <Button>Help</Button>
</TooltipTrigger>

// Use with interactive icons
<TooltipTrigger asChild>
  <InteractiveIcon iconType='filled'>
    <Information />
  </InteractiveIcon>
</TooltipTrigger>
```

‚ùå **Don't**

```tsx
// Don't wrap non-interactive elements
<TooltipTrigger>
  <Text>Static Text</Text>
</TooltipTrigger>

// Don't nest tooltips
<Tooltip>
  <TooltipTrigger>
    <Tooltip>...</Tooltip>
  </TooltipTrigger>
</Tooltip>
```

### Content Guidelines

‚úÖ **Do**

```tsx
// Keep content concise and helpful
<TooltipContent
  title='Short Title'
  content={<Text>Brief, helpful explanation.</Text>}
/>

// Use rich content when needed
<TooltipContent
  title='Details'
  content={
    <View className='gap-8'>
      <Text>Explanation</Text>
      <Button size='xs'>Action</Button>
    </View>
  }
/>
```

### Setup

‚úÖ **Do**

```tsx
// Include TooltipsBottomSheet once at root level
function App() {
  return (
    <ThemeProvider>
      <Navigation />
      <TooltipsBottomSheet />
    </ThemeProvider>
  );
}
```


### Performance

The Tooltip system is optimized to prevent unnecessary re-renders. When one tooltip opens, other tooltips on the page don't re-render.

</Tab>
</CustomTabs>

