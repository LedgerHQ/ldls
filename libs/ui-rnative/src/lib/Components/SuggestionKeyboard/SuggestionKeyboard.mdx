import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SuggestionKeyboardStories from './SuggestionKeyboard.stories';
import {
  SuggestionKeyboard,
  SuggestionKeyboardItem,
} from './SuggestionKeyboard';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title="Action/SuggestionKeyboard" of={SuggestionKeyboardStories} />

# ⌨️ Suggestion Keyboard

<CustomTabs>
  <Tab label="Overview">

## Introduction

The Suggestion Keyboard is a component that displays a row of quick suggestion buttons, typically used below input fields to provide common value options like percentages or amounts. It helps users quickly select predefined values without manual entry.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=6495-22228&m=dev).

## Anatomy

<Canvas of={SuggestionKeyboardStories.Base} />

- **Container**: A flexible row that spaces out the suggestion items
- **Items**: Individual buttons representing suggestions, with text labels

## Properties

### Overview

<Canvas of={SuggestionKeyboardStories.Base} />
<Controls of={SuggestionKeyboardStories.Base} />

### Content Variations

The Suggestion Keyboard adapts to different numbers of suggestion items (2-4 recommended for best layout):

<Canvas of={SuggestionKeyboardStories.ContentShowcase} />

### Layout Variations

Control the alignment and spacing of suggestions:

- Space Between (default): Evenly spaces items across the container
- Centered: Centers items with custom gap

<Canvas of={SuggestionKeyboardStories.LayoutShowcase} />

### Disabled State

Individual suggestions can be disabled when not applicable:

<Canvas of={SuggestionKeyboardStories.WithDisabledSuggestions} />

## Accessibility

To be implemented:

- **Color contrast**: Ensure readable text on button backgrounds
- **Text zoom**: Maintain layout integrity
- **Keyboard navigation**: Tab order for interactive buttons
- **Semantic labeling**: Proper ARIA roles for buttons
- **Focus management**: Visible focus indicators on items

</Tab>
<Tab label="Implementation">

## Installation

Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/ldls-ui-rnative @ledgerhq/ldls-design-core

# Install peer dependencies
npm install tailwindcss@^3.4.0 react@^18.3.1 react-native@^0.77.3 nativewind@^4.1.0 clsx tailwind-merge class-variance-authority
```

### NativeWind Configuration

To use the SuggestionKeyboard component with our custom NativeWind preset, you need to configure your `tailwind.config.js`:

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './src/**/*.{js,ts,jsx,tsx}', // Your project's files
    './node_modules/@ledgerhq/ldls-ui-rnative/dist/lib/**/*.{js,ts,jsx,tsx}', // Ledger UI Kit components
  ],
  presets: [require('@ledgerhq/ldls-design-core/nativewind-preset')], // the installed nativewind preset
};
```

### Basic Usage

```tsx
import {
  SuggestionKeyboard,
  SuggestionKeyboardItem,
} from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return (
    <SuggestionKeyboard>
      <SuggestionKeyboardItem onPress={() => console.log('25% pressed')}>
        25%
      </SuggestionKeyboardItem>
      <SuggestionKeyboardItem onPress={() => console.log('50% pressed')}>
        50%
      </SuggestionKeyboardItem>
      <SuggestionKeyboardItem onPress={() => console.log('75% pressed')}>
        75%
      </SuggestionKeyboardItem>
      <SuggestionKeyboardItem onPress={() => console.log('Max pressed')}>
        Max
      </SuggestionKeyboardItem>
    </SuggestionKeyboard>
  );
}
```

### With Disabled Suggestions

Individual suggestion items can be disabled:

```tsx
import {
  SuggestionKeyboard,
  SuggestionKeyboardItem,
} from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return (
    <SuggestionKeyboard>
      <SuggestionKeyboardItem onPress={() => console.log('50$ pressed')}>
        50$
      </SuggestionKeyboardItem>
      <SuggestionKeyboardItem onPress={() => console.log('100$ pressed')}>
        100$
      </SuggestionKeyboardItem>
      <SuggestionKeyboardItem
        disabled
        onPress={() => console.log('250$ pressed')}
      >
        250$
      </SuggestionKeyboardItem>
      <SuggestionKeyboardItem
        disabled
        onPress={() => console.log('500$ pressed')}
      >
        500$
      </SuggestionKeyboardItem>
    </SuggestionKeyboard>
  );
}
```

### Layout Variations

The SuggestionKeyboard uses flexbox for layout. By default, items are spaced evenly with `justify-between`. You can customize the layout using NativeWind classes:

```tsx
import {
  SuggestionKeyboard,
  SuggestionKeyboardItem,
} from '@ledgerhq/ldls-ui-rnative';
import { View } from 'react-native';

function LayoutExample() {
  return (
    <View className="space-y-4">
      {/* Default: Space Between */}
      <SuggestionKeyboard>
        <SuggestionKeyboardItem onPress={() => console.log('250$ pressed')}>
          250$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('500$ pressed')}>
          500$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('1000$ pressed')}>
          1000$
        </SuggestionKeyboardItem>
      </SuggestionKeyboard>

      {/* Centered with custom gap */}
      <SuggestionKeyboard className="justify-center gap-24">
        <SuggestionKeyboardItem onPress={() => console.log('250$ pressed')}>
          250$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('500$ pressed')}>
          500$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('1000$ pressed')}>
          1000$
        </SuggestionKeyboardItem>
      </SuggestionKeyboard>
    </View>
  );
}
```

### Arbitrary Numbers of Suggestions

The component supports an arbitrary number of suggestion items, but more than 4 may require custom styling for optimal display:

```tsx
import {
  SuggestionKeyboard,
  SuggestionKeyboardItem,
} from '@ledgerhq/ldls-ui-rnative';
import { View } from 'react-native';

function CountExample() {
  return (
    <View className="space-y-4">
      {/* 2 Suggestions */}
      <SuggestionKeyboard>
        <SuggestionKeyboardItem onPress={() => console.log('500$ pressed')}>
          500$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('1000$ pressed')}>
          1000$
        </SuggestionKeyboardItem>
      </SuggestionKeyboard>

      {/* 3 Suggestions */}
      <SuggestionKeyboard>
        <SuggestionKeyboardItem onPress={() => console.log('250$ pressed')}>
          250$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('500$ pressed')}>
          500$
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('1000$ pressed')}>
          1000$
        </SuggestionKeyboardItem>
      </SuggestionKeyboard>

      {/* 4 Suggestions */}
      <SuggestionKeyboard>
        <SuggestionKeyboardItem onPress={() => console.log('25% pressed')}>
          25%
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('50% pressed')}>
          50%
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('75% pressed')}>
          75%
        </SuggestionKeyboardItem>
        <SuggestionKeyboardItem onPress={() => console.log('Max pressed')}>
          Max
        </SuggestionKeyboardItem>
      </SuggestionKeyboard>
    </View>
  );
}
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the SuggestionKeyboard component and maintain design system principles.

### Content Composition

✅ **Do**

```tsx
// Use SuggestionKeyboardItem as children
<SuggestionKeyboard>
  <SuggestionKeyboardItem onPress={handlePress}>25%</SuggestionKeyboardItem>
  <SuggestionKeyboardItem onPress={handlePress}>50%</SuggestionKeyboardItem>
</SuggestionKeyboard>

// Add event handlers to items
<SuggestionKeyboardItem onPress={handlePress}>Max</SuggestionKeyboardItem>
```

❌ **Don't**

```tsx
// Don't use plain TouchableOpacity or View as children
<SuggestionKeyboard>
  <TouchableOpacity><Text>25%</Text></TouchableOpacity>
  <TouchableOpacity><Text>50%</Text></TouchableOpacity>
</SuggestionKeyboard>

// Don't nest complex components inside items
<SuggestionKeyboardItem>
  <View className="flex-row items-center">
    <Icon />
    <Text>Max</Text>
  </View>
</SuggestionKeyboardItem>
```

### Layout and Styling

✅ **Do**

```tsx
// Use className for layout adjustments
<SuggestionKeyboard className="justify-center gap-16">
  ...
</SuggestionKeyboard>

// Use container elements for positioning
<View className="w-full px-24">
  <SuggestionKeyboard>...</SuggestionKeyboard>
</View>

// Use for responsive layouts
<SuggestionKeyboard className="flex-col md:flex-row">
  ...
</SuggestionKeyboard>
```

❌ **Don't**

```tsx
// Don't override item styling directly
<SuggestionKeyboard className="bg-accent">
  ...
</SuggestionKeyboard>

// Don't modify internal padding of items
<SuggestionKeyboardItem className="px-4 py-2">...</SuggestionKeyboardItem>

// Don't override typography
<SuggestionKeyboardItem className="body-1-semi-bold">...</SuggestionKeyboardItem>
```

> **Note**: Use `className` primarily for flexbox layout properties (justify, gap, etc.). The individual item styling (colors, padding, hover states) should remain consistent with the design system.

</Tab>
</CustomTabs>
