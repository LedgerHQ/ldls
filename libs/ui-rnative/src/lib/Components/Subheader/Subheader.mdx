import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import { Box } from '../Utility';
import * as SubheaderStories from './Subheader.stories';
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderCount,
  SubheaderHint,
  SubheaderDescription,
  SubheaderAction,
} from './Subheader';
import {
  CustomTabs,
  Tab,
  DoVsDontRow,
  DoBlockItem,
  DontBlockItem,
} from '../../../../.storybook/components';
import CommonRulesDoAndDont from '../../../../.storybook/components/DoVsDont/CommonRulesDoAndDont.mdx';

<Meta title='Components/Subheader' of={SubheaderStories} />

# Subheader

<CustomTabs>
  <Tab label="Overview">

## Introduction

Subheaders are section headers that provide context and organization to content blocks. They use a composite component pattern that provides full flexibility over layout and content through composable sub-components.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=your-node-id).

## Anatomy

<Canvas of={SubheaderStories.Complete} />

The Subheader uses a composite structure with the following components:

- **Subheader**: Root container
- **SubheaderRow**: Interactive horizontal container for title and inline elements
- **SubheaderTitle**: The main heading text (required)
- **SubheaderCount**: Displays a numeric count in parentheses (optional)
- **SubheaderHint**: Container for informational elements like tooltips (optional)
- **SubheaderDescription**: Additional descriptive text below the row (optional)
- **SubheaderAction**: Container for action elements, positioned at the far right (optional)

## Properties

### Overview

<Canvas of={SubheaderStories.Base} />
<Controls of={SubheaderStories.Base} />

### With Description

Add descriptive text below the title row:

<Canvas of={SubheaderStories.WithDescription} />

### Complete Example

All features combined in one subheader:

<Canvas of={SubheaderStories.Complete} />

> **Note**: The `SubheaderRow` and `SubheaderTitle` are required. All other components (`SubheaderCount`, `SubheaderHint`, `SubheaderDescription`, `SubheaderAction`) are optional and can be combined as needed.

### Interactive Row

Make the entire row clickable:

<Canvas of={SubheaderStories.Interactive} />

> **Key behaviors:**
>
> - Subheaders flow naturally to fill their parent container width
> - Title truncates with ellipsis when too long for the available space
> - Count, hint, and action elements maintain their positions
> - Uses flex layout for responsive arrangement
> - Action elements are positioned at the far right using `marginLeft: 'auto'`

## Accessibility

React Native Subheader includes:

- Native touch feedback with `Pressable` for interactive rows
- Proper text truncation with `numberOfLines` and `ellipsizeMode`
- Screen reader support through React Native's accessibility features
- Clear visual hierarchy for scannable content

</Tab>
<Tab label="Implementation">

## Setup

Install and set up the library with our [Setup Guide â†’](?path=/docs/getting-started-setup--docs).

## Basic Usage

The Subheader uses a composite component pattern for maximum flexibility:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
} from '@ledgerhq/lumen-ui-rnative';

function MyComponent() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
      </SubheaderRow>
    </Subheader>
  );
}
```

### With Description

Add descriptive text below the title row:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderDescription,
} from '@ledgerhq/lumen-ui-rnative';

function DescriptiveSubheader() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
      </SubheaderRow>
      <SubheaderDescription>
        Additional context about this section
      </SubheaderDescription>
    </Subheader>
  );
}
```

### With Count

Display a numeric count next to the title:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderCount,
} from '@ledgerhq/lumen-ui-rnative';

function CountExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Accounts</SubheaderTitle>
        <SubheaderCount value={30} />
      </SubheaderRow>
    </Subheader>
  );
}
```

You can also provide a custom formatter:

```tsx
<SubheaderCount value={150} format={(n) => (n > 99 ? '(99+)' : `(${n})`)} />
```

### With Hint Tooltip

Add an informational tooltip using the `SubheaderHint` component:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderHint,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from '@ledgerhq/lumen-ui-rnative';
import { InteractiveIcon } from '@ledgerhq/lumen-ui-rnative';
import { Information } from '@ledgerhq/lumen-ui-rnative/symbols';

function HintExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
        <SubheaderHint
          content={
            <Tooltip>
              <TooltipTrigger>
                <InteractiveIcon
                  Icon={Information}
                  size={16}
                  appearance='ghost'
                  aria-label='More information'
                />
              </TooltipTrigger>
              <TooltipContent content='This is additional information' />
            </Tooltip>
          }
        />
      </SubheaderRow>
    </Subheader>
  );
}
```

### With Action

Include an action element in the row (automatically aligned to the right):

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderAction,
  Link,
} from '@ledgerhq/lumen-ui-rnative';

function ActionExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
        <SubheaderAction onPress={() => console.log('Action clicked')}>
          <Link href='https://ledger.com' appearance='accent' size='sm'>
            View More
          </Link>
        </SubheaderAction>
      </SubheaderRow>
    </Subheader>
  );
}
```

### Interactive Row

Make the entire row clickable by adding an `onPress` handler to `SubheaderRow`:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderCount,
  SubheaderDescription,
} from '@ledgerhq/lumen-ui-rnative';

function InteractiveExample() {
  return (
    <Subheader>
      <SubheaderRow onPress={() => console.log('Row clicked')}>
        <SubheaderTitle>Clickable Row</SubheaderTitle>
        <SubheaderCount value={12} />
      </SubheaderRow>
      <SubheaderDescription>
        The entire row is clickable when onPress is provided
      </SubheaderDescription>
    </Subheader>
  );
}
```

### Complete Example

Here's a comprehensive example showing all Subheader features:

```tsx
import {
  Subheader,
  SubheaderRow,
  SubheaderTitle,
  SubheaderCount,
  SubheaderHint,
  SubheaderDescription,
  SubheaderAction,
  Link,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
  InteractiveIcon,
} from '@ledgerhq/lumen-ui-rnative';
import { Information } from '@ledgerhq/lumen-ui-rnative/symbols';

function FullExample() {
  return (
    <Subheader>
      <SubheaderRow>
        <SubheaderTitle>Section Title</SubheaderTitle>
        <SubheaderCount value={42} />
        <SubheaderHint
          content={
            <Tooltip>
              <TooltipTrigger>
                <InteractiveIcon
                  Icon={Information}
                  size={16}
                  appearance='ghost'
                  aria-label='More information'
                />
              </TooltipTrigger>
              <TooltipContent content='Additional info' />
            </Tooltip>
          }
        />
        <SubheaderAction onPress={() => console.log('Action clicked')}>
          <Link href='https://example.com' appearance='accent' size='sm'>
            Action
          </Link>
        </SubheaderAction>
      </SubheaderRow>
      <SubheaderDescription>
        This is a detailed description of the section.
      </SubheaderDescription>
    </Subheader>
  );
}
```

### Layout Adjustments with lx

Use the `lx` prop for layout adjustments like margins or positioning:

```tsx
<Subheader lx={{ marginTop: 's16', marginBottom: 's8' }}>
  <SubheaderRow>
    <SubheaderTitle>With Margin</SubheaderTitle>
  </SubheaderRow>
  <SubheaderDescription>
    This subheader has custom margins
  </SubheaderDescription>
</Subheader>
```

## Do's and Don'ts

The following guidelines ensure consistent usage of the Subheader component and maintain design system principles.

<Box lx={{ flexDirection: 'column', gap: 's16' }}>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Count for numeric values'
      description='Pass numbers using the value prop'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Accounts</SubheaderTitle>
    <SubheaderCount value={30} />
  </SubheaderRow>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't add parentheses manually"
      description='Count component automatically formats the value'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Accounts (30)</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use the composite pattern'
      description='Compose sub-components for flexibility'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
    <SubheaderCount value={5} />
  </SubheaderRow>
  <SubheaderDescription>Description</SubheaderDescription>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use non-composite children"
      description='Only use the provided sub-components'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <Text>Title (5)</Text>
  <Text>Description</Text>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Action in Row with onPress'
      description='Action should have an onPress handler and be placed in Row for right alignment'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
    <SubheaderAction onPress={handleAction}>
      <Link href='#'>Link</Link>
    </SubheaderAction>
  </SubheaderRow>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't place Action outside Row"
      description='Action must be inside SubheaderRow for proper positioning'
    >

{/* prettier-ignore */}
```tsx
<Subheader>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
  </SubheaderRow>
  <SubheaderAction onPress={handleAction}>
    <Link href='#'>Link</Link>
  </SubheaderAction>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use lx for layout adjustments only'
      description='Use the lx prop for margins, positioning, and other layout adjustments'
    >

{/* prettier-ignore */}
```tsx
<Subheader lx={{ marginTop: 's16' }}>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't use lx for appearance changes"
      description='Avoid using lx to modify colors, padding, or other core appearance styles'
    >

{/* prettier-ignore */}
```tsx
<Subheader lx={{ backgroundColor: 'accent', padding: 's24' }}>
  <SubheaderRow>
    <SubheaderTitle>Title</SubheaderTitle>
  </SubheaderRow>
</Subheader>
```

    </DontBlockItem>

  </DoVsDontRow>

  <CommonRulesDoAndDont />
</Box>

</Tab>
</CustomTabs>

