import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SpotStories from './Spot.stories';
import { Spot } from './Spot';
import { CustomTabs, Tab } from '../../../../.storybook/components';
import { DoVsDontRow, DoBlockItem, DontBlockItem } from '../../../../.storybook/components/DoVsDont';
import CommonRulesDoAndDont from '../../../../.storybook/docs/CommonRulesDoAndDont.mdx';

<Meta title='Components/Spot' of={SpotStories} />

# ðŸ”µ Spot

<CustomTabs>
  <Tab label="Overview">

## Introduction

Spots are circular status indicators that provide visual feedback about different states, actions, or information. They come in various predefined appearances and can display custom icons or numbers to convey specific meanings in the interface.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=6786-4738).

## Anatomy

<Canvas of={SpotStories.Base} />

- **Circular Container**: Circular background implemented with React Native View
- **Content**: Icon, number, or loading indicator based on appearance type

## Properties

### Overview

<Canvas of={SpotStories.Base} />
<Controls of={SpotStories.Base} />

### Appearance Types

There are 8 predefined spot appearances, each serving different purposes:

- **icon**: Custom icon display
- **bluetooth**: Bluetooth connectivity indicator
- **check**: Success/completion state
- **error**: Error or failure state
- **warning**: Warning or caution state
- **info**: Information state
- **loader**: Loading or processing state
- **number**: Numeric display (0-9)

<Canvas of={SpotStories.AppearanceShowcase} />

### Sizes

There are 3 predefined spot sizes:

<Canvas of={SpotStories.SizesShowcase} />

### States

The Spot component has an optional disabled state.

<Canvas of={SpotStories.StatesShowcase} />

### Discriminated Union Types

The Spot component uses TypeScript's discriminated union pattern to ensure type safety:

- `appearance: 'icon'` requires an `icon` prop
- `appearance: 'number'` requires a `number` prop (0-9)
- All other appearances are self-contained

## Accessibility

To be implemented:

- Color contrast verification
- Screen reader support for status descriptions
- Keyboard navigation considerations
- Semantic labeling for different states

</Tab>
<Tab label="Implementation">

## Setup

Install and set up the library with our [Setup Guide â†’](?path=/docs/getting-started-setup--docs).

### Basic Usage

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return <Spot appearance='check' />;
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes:

```tsx
<Spot appearance='icon' icon={Settings} className='mt-4 ml-2' />
```

### With Icons

The Spot component supports custom icons through the discriminated union type system:

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';
import { Settings, Heart, Star } from '@ledgerhq/ldls-ui-rnative/symbols';
import { View } from 'react-native';

function MyComponent() {
  return (
    <View className='flex gap-4'>
      <Spot appearance='icon' icon={Settings} />
      <Spot appearance='icon' icon={Heart} />
      <Spot appearance='icon' icon={Star} />
    </View>
  );
}
```

### With Numbers

The Spot component can display numeric values from 0-9:

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';
import { View } from 'react-native';

function MyComponent() {
  return (
    <View className='flex gap-4'>
      <Spot appearance='number' number={1} />
      <Spot appearance='number' number={2} />
      <Spot appearance='number' number={3} />
    </View>
  );
}
```

### Status Indicators

Spot is designed for status indication with predefined appearances:

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';
import { View } from 'react-native';

function StatusIndicators() {
  return (
    <View className='flex gap-4'>
      {/* Success state */}
      <Spot appearance='check' />

      {/* Error state */}
      <Spot appearance='error' />

      {/* Warning state */}
      <Spot appearance='warning' />

      {/* Info state */}
      <Spot appearance='info' />

      {/* Loading state */}
      <Spot appearance='loader' />

      {/* Connectivity */}
      <Spot appearance='bluetooth' />
    </View>
  );
}
```

## Do's and Don'ts

<div className='flex flex-col gap-24'>
  <DoVsDontRow>
    <DoBlockItem
      title='Use required props for discriminated types'
      description='Icon appearance requires icon prop, number appearance requires number prop'
    >

{/* prettier-ignore */}
```tsx
import { Settings } from '@ledgerhq/ldls-ui-rnative/symbols';

<Spot appearance='icon' icon={Settings} />
<Spot appearance='number' number={5} />
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't omit required props"
      description='Discriminated union types require their specific props'
    >

{/* prettier-ignore */}
```tsx
import { Settings } from '@ledgerhq/ldls-ui-rnative/symbols';

<Spot appearance='icon' /> // Missing required 'icon' prop
<Spot appearance='number' /> // Missing required 'number' prop
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use valid number values'
      description='Number appearance only accepts values from 0 to 9'
    >

{/* prettier-ignore */}
```tsx
<Spot appearance='number' number={5} />
<Spot appearance='number' number={0} />
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't pass invalid number values"
      description='Only values 0-9 are allowed for number appearance'
    >

{/* prettier-ignore */}
```tsx
<Spot appearance='number' number={10} />
<Spot appearance='number' number={-1} />
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Use Spot for status indication only'
      description='Spots are designed to display status, not to be interactive elements'
    >

{/* prettier-ignore */}
```tsx
<Spot appearance='check' />
<Spot appearance='error' />
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't make spots interactive"
      description='Avoid adding press handlers or making spots clickable'
    >

{/* prettier-ignore */}
```tsx
<Spot appearance='check' onPress={handlePress} />
<Spot appearance='error' className='cursor-pointer' />
```

    </DontBlockItem>

  </DoVsDontRow>

  <CommonRulesDoAndDont />
</div>

</Tab>
</CustomTabs>
