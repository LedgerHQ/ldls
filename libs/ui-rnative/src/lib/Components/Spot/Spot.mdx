import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as SpotStories from './Spot.stories';
import { Spot } from './Spot';
import { CustomTabs, Tab } from '../../../../.storybook/CustomTabs';

<Meta title="Components/Spot" of={SpotStories} />

# üîµ Spot

<CustomTabs>
  <Tab label="Overview">

## Introduction

Spots are circular status indicators that provide visual feedback about different states, actions, or information. They come in various predefined appearances and can display custom icons or numbers to convey specific meanings in the interface.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=6786-4738).

## Anatomy

<Canvas of={SpotStories.Base} />

- **Circular Container**: Circular background implemented with React Native View
- **Content**: Icon, number, or loading indicator based on appearance type

## Properties

### Overview

<Canvas of={SpotStories.Base} />
<Controls of={SpotStories.Base} />

### Appearance Types

There are 8 predefined spot appearances, each serving different purposes:

- **icon**: Custom icon display
- **bluetooth**: Bluetooth connectivity indicator
- **check**: Success/completion state
- **error**: Error or failure state
- **warning**: Warning or caution state
- **info**: Information state
- **loader**: Loading or processing state
- **number**: Numeric display (0-9)

<Canvas of={SpotStories.AppearanceShowcase} />

### Sizes

There are 3 predefined spot sizes:

<Canvas of={SpotStories.SizesShowcase} />

### States

The Spot component has an optional disabled state.

<Canvas of={SpotStories.StatesShowcase} />

### Discriminated Union Types

The Spot component uses TypeScript's discriminated union pattern to ensure type safety:

- `appearance: 'icon'` requires an `icon` prop
- `appearance: 'number'` requires a `number` prop (0-9)
- All other appearances are self-contained

## Accessibility

To be implemented:

- Color contrast verification
- Screen reader support for status descriptions
- Keyboard navigation considerations
- Semantic labeling for different states

</Tab>
<Tab label="Implementation">

## Setup
Install and set up the library with our [Setup Guide ‚Üí](?path=/docs/getting-started-setup--docs).

### Basic Usage

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';

function MyComponent() {
  return (
    <Spot appearance="check" />
  );
}
```

### Custom Styling

While the component comes with predefined styles, you can extend them using Tailwind classes:

```tsx
<Spot
  appearance="icon"
  icon={Settings}
  className="mt-4 ml-2"
/>
```

### With Icons

The Spot component supports custom icons through the discriminated union type system:

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';
import { Settings, Heart, Star } from '@ledgerhq/ldls-ui-rnative/symbols';
import { View } from 'react-native';

function MyComponent() {
  return (
    <View className="flex gap-4">
      <Spot appearance="icon" icon={Settings} />
      <Spot appearance="icon" icon={Heart} />
      <Spot appearance="icon" icon={Star} />
    </View>
  );
}
```

### With Numbers

The Spot component can display numeric values from 0-9:

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';
import { View } from 'react-native';

function MyComponent() {
  return (
    <View className="flex gap-4">
      <Spot appearance="number" number={1} />
      <Spot appearance="number" number={2} />
      <Spot appearance="number" number={3} />
    </View>
  );
}
```

### Status Indicators

Spot is designed for status indication with predefined appearances:

```tsx
import { Spot } from '@ledgerhq/ldls-ui-rnative';
import { View } from 'react-native';

function StatusIndicators() {
  return (
    <View className="flex gap-4">
      {/* Success state */}
      <Spot appearance="check" />

      {/* Error state */}
      <Spot appearance="error" />

      {/* Warning state */}
      <Spot appearance="warning" />

      {/* Info state */}
      <Spot appearance="info" />

      {/* Loading state */}
      <Spot appearance="loader" />

      {/* Connectivity */}
      <Spot appearance="bluetooth" />
    </View>
  );
}
```

## Do's and Don'ts

### Icon and Number Props

‚úÖ **Do**

```tsx
// Import specific icons for better tree-shaking
import { Settings, Heart } from '@ledgerhq/ldls-ui-rnative/symbols';

// Use icon prop for custom icons
<Spot appearance="icon" icon={Settings} />

// Use number prop for numeric display
<Spot appearance="number" number={5} />

// Use appropriate number values
<Spot appearance="number" number={0} /> // Valid: 0-9
```

‚ùå **Don't**

```tsx
// Don't import entire icon library
import * as Icons from '@ledgerhq/ldls-ui-rnative/symbols';

// Don't pass invalid number values
<Spot appearance="number" number={10} /> // Invalid: only 0-9 allowed

// Don't omit required props for discriminated types
<Spot appearance="icon" /> // Missing required 'icon' prop
<Spot appearance="number" /> // Missing required 'number' prop

// Don't use wrong prop types
<Spot appearance="icon" icon="settings" /> // Should be component, not string
```

### Layout and Styling

‚úÖ **Do**

```tsx
// Use className for layout positioning
<Spot appearance="check" className="mt-4 ml-2" />

// Use className for positioning
<Spot appearance="error" className="absolute top-0 right-0" />

// Use className for different positions between mobile and desktop
<Spot appearance="info" className="hidden md:block" />
```

‚ùå **Don't**

```tsx
// Don't override spot's core styling
<Spot appearance="check" className="bg-error" />

// Don't modify internal spacing/padding
<Spot appearance="error" className="p-6" />

// Don't override typography - spot has fixed sizing
<Spot appearance="number" className="body-3" />

// Don't override border radius
<Spot appearance="check" className="rounded-lg" />
```

> **Note**: Use `className` only for layout-related utilities (positioning, margins, display properties). The spot's core styling (colors, size, shape) should be controlled through the `appearance` prop to maintain design system consistency. The Spot component has a fixed 48px size and circular shape that cannot be modified.

### Status vs Interaction

‚úÖ **Do**

```tsx
// Use Spot for status indication only
<Spot appearance="check" /> // Status indicator
```

‚ùå **Don't**

```tsx
// Don't make spots directly interactive
<Spot appearance="check" className="cursor-pointer" onPress={handlePress} />
```

### Performance Considerations

‚úÖ **Do**

```tsx
// Import specific symbols for better tree-shaking
import { Settings, Bluetooth } from '@ledgerhq/ldls-ui-rnative/symbols';
```

‚ùå **Don't**

```tsx
// Don't import all symbols
import * as AllSymbols from '@ledgerhq/ldls-ui-rnative/symbols';
```

### TypeScript Usage

‚úÖ **Do**

```tsx
// Literal type for better type safety
<Spot appearance="check" />

// Discriminated union
<Spot appearance="icon" icon={Settings} />
```

‚ùå **Don't**

```tsx
// Don't use string literals for appearance
<Spot appearance={'check'} />

// Don't bypass discriminated union
<Spot appearance="icon" /> // Missing required icon prop
```

</Tab>
</CustomTabs>
