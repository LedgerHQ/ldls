import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as InteractiveIconStories from './InteractiveIcon.stories';
import { Box } from '../Utility';
import { InteractiveIcon } from './InteractiveIcon';
import { CustomTabs, Tab } from '../../../../.storybook/components';
import { DoVsDontRow, DoBlockItem, DontBlockItem } from '../../../../.storybook/components/DoVsDont';
import CommonRulesDoAndDont from '../../../../.storybook/docs/CommonRulesDoAndDont.mdx';

<Meta title='Components/InteractiveIcon' of={InteractiveIconStories} />

# üéØ InteractiveIcon

<CustomTabs>
  <Tab label="Overview">

## Introduction

InteractiveIcons are specialized interactive elements designed exclusively for icon-based actions. They provide a compact way to trigger actions while maintaining clear visual hierarchy through two distinct styles optimized for different icon types.

> View in [Figma](https://www.figma.com/design/JxaLVMTWirCpU0rsbZ30k7/2.-Components-Library?node-id=6975-2571).

## Anatomy

<Canvas of={InteractiveIconStories.IconTypeShowcase} />

- **Icon**: The visual representation of the action, displayed as a single icon element from the design system
- **Container**: A circular touch target that provides the interactive area and visual feedback

## Properties

### Overview

<Canvas of={InteractiveIconStories.Base} />
<Controls of={InteractiveIconStories.Base} />

### Icon Types

InteractiveIcons come in two visual styles, each optimized for specific use cases:

- **filled**: Best for filled/solid icons. Features a transparent background with colored icon that changes on interaction
- **stroked**: Best for outlined icons. Features a subtle background that appears on press with colored icon states

<Canvas of={InteractiveIconStories.IconTypeShowcase} />

### Icon Sizes

InteractiveIcons support various icon sizes to accommodate different use cases and screen densities:

<Canvas of={InteractiveIconStories.SizesShowcase} />

Common sizes include:

- **16px**: Compact actions in dense interfaces
- **20px**: Standard size for most interactive icons
- **24px**: Prominent actions in toolbars
- **40px**: Large touch targets for mobile interfaces

> **‚ö†Ô∏è Important**: Icon sizes are controlled by the icon component itself, not through InteractiveIcon.

### Icon States

InteractiveIcons have enabled or disabled states:

<Canvas of={InteractiveIconStories.StatesShowcase} />

## Accessibility

InteractiveIcons require special attention for accessibility since they contain only visual icons without text:

### Screen Reader Support

**Always provide an `accessibilityLabel` or `aria-label` prop** that clearly describes the action:

```tsx
<InteractiveIcon iconType='filled' accessibilityLabel='Delete item'>
  <DeleteCircleFill size={20} />
</InteractiveIcon>
```

### Touch Interaction

InteractiveIcons support full touch interaction:

- **Tap**: Activates the primary action via `onPress`
- **Long Press**: Triggers secondary action via `onLongPress` (if provided)
- **Pressed state**: Visual feedback when touched
- **Disabled state**: Prevents interaction when disabled

</Tab>
<Tab label="Implementation">

## Setup

Install and set up the library with our [Setup Guide ‚Üí](?path=/docs/getting-started-setup--docs).

### Basic usage

```tsx
import { InteractiveIcon, Box } from '@ledgerhq/lumen-ui-rnative';
import { Settings, DeleteCircleFill } from '@ledgerhq/lumen-ui-rnative/symbols';

function MyComponent() {
  return (
    <Box lx={{ gap: 's8' }}>
      {/* Stroked interactive icon */}
      <InteractiveIcon
        iconType='stroked'
        accessibilityLabel='Open settings'
        onPress={handleSettings}
      >
        <Settings size={20} />
      </InteractiveIcon>

      {/* Filled interactive icon */}
      <InteractiveIcon
        iconType='filled'
        accessibilityLabel='Delete item'
        onPress={handleDelete}
      >
        <DeleteCircleFill size={20} />
      </InteractiveIcon>
    </Box>
  );
}
```

### With Event Handlers

```tsx
import { InteractiveIcon } from '@ledgerhq/lumen-ui-rnative';
import {
  CheckmarkCircle,
  CheckmarkCircleFill,
} from '@ledgerhq/lumen-ui-rnative/symbols';

function LikeButton({ isSelected, onToggle }) {
  return (
    <InteractiveIcon
      iconType={isSelected ? 'filled' : 'stroked'}
      accessibilityLabel={isSelected ? 'Deselect' : 'Select'}
      onPress={onToggle}
    >
      {isSelected ? (
        <CheckmarkCircleFill size={20} />
      ) : (
        <CheckmarkCircle size={20} />
      )}
    </InteractiveIcon>
  );
}
```

### Different Icon Sizes

```tsx
import { InteractiveIcon, Box } from '@ledgerhq/lumen-ui-rnative';
import { Settings } from '@ledgerhq/lumen-ui-rnative/symbols';

function SizeExamples() {
  return (
    <Box lx={{ alignItems: 'center', gap: 's4' }}>
      {/* Compact size for dense interfaces */}
      <InteractiveIcon iconType='stroked' accessibilityLabel='Settings'>
        <Settings size={16} />
      </InteractiveIcon>

      {/* Standard size */}
      <InteractiveIcon iconType='stroked' accessibilityLabel='Settings'>
        <Settings size={20} />
      </InteractiveIcon>

      {/* Prominent size */}
      <InteractiveIcon iconType='stroked' accessibilityLabel='Settings'>
        <Settings size={24} />
      </InteractiveIcon>

      {/* Large touch target for mobile */}
      <InteractiveIcon iconType='stroked' accessibilityLabel='Settings'>
        <Settings size={40} />
      </InteractiveIcon>
      
      {/* Large touch target for mobile */}
      <InteractiveIcon iconType='stroked' accessibilityLabel='Settings'>
        <Settings size={64} />
      </InteractiveIcon>
    </Box>
  );
}
```

## Do's and Don'ts

The following guidelines are based on our design system principles and accessibility best practices for icon-only interactive elements.

<Box lx={{ flexDirection: 'column', gap: 's24' }}>
  <DoVsDontRow>
    <DoBlockItem
      title='Use appropriate icon types for variants'
      description='Match icon styles to iconType prop: filled icons with filled, outlined icons with stroked'
    >

{/* prettier-ignore */}
```tsx
import { DeleteCircleFill, Settings } from '@ledgerhq/lumen-ui-rnative/symbols';

// Filled icon with filled variant
<InteractiveIcon iconType='filled' accessibilityLabel='Delete'>
  <DeleteCircleFill size={20} />
</InteractiveIcon>

// Outlined icon with stroked variant
<InteractiveIcon iconType='stroked' accessibilityLabel='Settings'>
  <Settings size={20} />
</InteractiveIcon>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't mix icon styles with wrong variants"
      description='Avoid using filled icons with stroked variant or vice versa as it creates visual inconsistency'
    >

{/* prettier-ignore */}
```tsx
import { DeleteCircleFill, Settings } from '@ledgerhq/lumen-ui-rnative/symbols';

// Filled icon with stroked variant (wrong)
<InteractiveIcon iconType='stroked' accessibilityLabel='Delete'>
  <DeleteCircleFill size={20} />
</InteractiveIcon>

// Outlined icon with filled variant (wrong)
<InteractiveIcon iconType='filled' accessibilityLabel='Settings'>
  <Settings size={20} />
</InteractiveIcon>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Always provide descriptive accessibilityLabel'
      description='Use clear, action-oriented labels that describe what the icon does'
    >

{/* prettier-ignore */}
```tsx
import { Download } from '@ledgerhq/lumen-ui-rnative/symbols';

<InteractiveIcon iconType='stroked' accessibilityLabel='Download PDF document'>
  <Download size={20} />
</InteractiveIcon>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't omit or use generic accessibilityLabel"
      description='Avoid missing labels, generic labels like "Click here", or icon names as labels'
    >

{/* prettier-ignore */}
```tsx
import { Download } from '@ledgerhq/lumen-ui-rnative/symbols';

<InteractiveIcon iconType='stroked' accessibilityLabel='Click here'>
  <Download size={20} />
</InteractiveIcon>
```

    </DontBlockItem>

  </DoVsDontRow>

  <DoVsDontRow>
    <DoBlockItem
      title='Only render icon components as children'
      description='InteractiveIcon expects icon components as children'
    >

{/* prettier-ignore */}
```tsx
import { MoreVertical } from '@ledgerhq/lumen-ui-rnative/symbols';

<InteractiveIcon iconType='stroked' accessibilityLabel='More actions'>
  <MoreVertical size={20} />
</InteractiveIcon>
```

    </DoBlockItem>
    <DontBlockItem
      title="Don't render arbitrary content as children"
      description='Avoid using text, views, or other non-icon content as children'
    >

{/* prettier-ignore */}
```tsx
import { MoreVertical } from '@ledgerhq/lumen-ui-rnative/symbols';

<InteractiveIcon iconType='stroked' accessibilityLabel='More actions'>
  Settings
</InteractiveIcon>
```

    </DontBlockItem>

  </DoVsDontRow>

  <CommonRulesDoAndDont />
</Box>

</Tab>
</CustomTabs>
