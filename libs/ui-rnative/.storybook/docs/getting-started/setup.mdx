import { Meta, Story, Canvas, Controls } from '@storybook/addon-docs/blocks';

<Meta title="Getting Started/Setup" />

## Installation
Install the packages and their peer dependencies:

```bash
# Install the UI Kit
npm install @ledgerhq/lumen-ui-rnative @ledgerhq/lumen-design-core

# Install peer dependencies
npm install react-native@^0.77.0 react@^18.3.1
```



## Setup ThemeProvider

The `ThemeProvider` will manage themes, colorScheme, locale, rtl and other global state...

```tsx
import { ThemeProvider } from '@ledgerhq/lumen-ui-rnative';
import { ledgerLiveThemes } from '@ledgerhq/lumen-design-core';

function App() {
  return (
    <ThemeProvider 
      themes={ledgerLiveThemes}
      colorScheme="dark"
      locale="en"
    >
      <YourApp />
    </ThemeProvider>
  );
}
```

## Themes

Use the themes prop to pass theme objects to the ThemeProvider.

Three themes are currently available:
- enterprise
- ledger-live
- websites

Once provided, the active theme can be accessed using Lumen style-system utilities.

```tsx
import { ThemeProvider } from '@ledgerhq/lumen-ui-rnative';
import { ledgerLiveThemes, enterpriseThemes, websitesThemes } from '@ledgerhq/lumen-design-core';

function App() {
  return (
    <ThemeProvider themes={ledgerLiveThemes}>
      <App />
    </ThemeProvider>
```

## Color Scheme

The `colorScheme` prop controls the theme color scheme.
If not provided, the theme will follow the device settings.

- `"dark"` - Forces dark color scheme
- `"light"` - Forces light color scheme


```tsx
<ThemeProvider 
  themes={ledgerLiveThemes}
  colorScheme="dark"
>
  <App />
</ThemeProvider>
```

If the ThemeProvider is uncontrolled, you can use the [`useTheme`](/?path=/docs/style-system-usetheme--docs) hook to control theme mode at runtime:

```tsx
import { useTheme } from '@ledgerhq/lumen-ui-rnative/styles';

const ThemeToggle = () => {
  const { colorScheme, toggleColorScheme, setColorScheme } = useTheme();
  
  return (
    <Button onPress={toggleColorScheme}>
      Current: {colorScheme}
    </Button>
  );
};
```

When the colorScheme changes, `Appearance.setColorScheme` is automatically called to update the system theme.


## Internationalization

The ThemeProvider also manages the appâ€™s locale using React Context.  
You can just pass the locale to the `ThemeProvider` and the translations will be loaded automatically.

```tsx
import { ThemeProvider, type SupportedLocale, Languages } from '@ledgerhq/lumen-ui-rnative';

function AppProviders() {
  const [locale, setLocale] = useState<SupportedLocale>(Languages.en.id);
  return (
    <ThemeProvider locale={locale}>
      <App />
      <Button onClick={() => setLocale('fr')}>Switch to French</Button>
    </ThemeProvider>
  );
}
```
